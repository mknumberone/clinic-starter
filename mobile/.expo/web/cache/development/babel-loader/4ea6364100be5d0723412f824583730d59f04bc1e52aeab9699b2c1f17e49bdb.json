{"ast":null,"code":"import React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Card from \"react-native-paper/lib/module/components/Card/Card\";\nimport Text from \"react-native-paper/lib/module/components/Typography/Text\";\nimport Chip from \"react-native-paper/lib/module/components/Chip/Chip\";\nimport ActivityIndicator from \"react-native-paper/lib/module/components/ActivityIndicator\";\nimport { useTheme } from \"react-native-paper/lib/module/core/theming\";\nimport { useQuery } from '@tanstack/react-query';\nimport { useNavigation } from '@react-navigation/native';\nimport { prescriptionService } from \"../services/prescription.service\";\nimport { useAuthStore } from \"../stores/authStore\";\nimport dayjs from 'dayjs';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function PrescriptionsScreen() {\n  var theme = useTheme();\n  var navigation = useNavigation();\n  var user = useAuthStore(function (state) {\n    return state.user;\n  });\n  var _useQuery = useQuery({\n      queryKey: ['myPrescriptions', user == null ? void 0 : user.patient_id],\n      queryFn: function queryFn() {\n        return prescriptionService.getMyPrescriptions((user == null ? void 0 : user.patient_id) || '');\n      },\n      enabled: !!(user != null && user.patient_id)\n    }),\n    data = _useQuery.data,\n    isLoading = _useQuery.isLoading,\n    refetch = _useQuery.refetch;\n  if (isLoading && !data) {\n    return _jsx(View, {\n      style: styles.center,\n      children: _jsx(ActivityIndicator, {\n        size: \"large\"\n      })\n    });\n  }\n  return _jsx(ScrollView, {\n    style: styles.container,\n    refreshControl: _jsx(RefreshControl, {\n      refreshing: isLoading,\n      onRefresh: refetch\n    }),\n    children: !data || data.length === 0 ? _jsx(View, {\n      style: styles.emptyContainer,\n      children: _jsx(Text, {\n        variant: \"bodyLarge\",\n        children: \"B\\u1EA1n ch\\u01B0a c\\xF3 \\u0111\\u01A1n thu\\u1ED1c n\\xE0o.\"\n      })\n    }) : _jsx(View, {\n      style: styles.list,\n      children: data.map(function (prescription) {\n        var _prescription$doctor, _prescription$doctor$;\n        return _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return navigation.navigate('PrescriptionDetail', {\n              id: prescription.id\n            });\n          },\n          children: _jsx(Card, {\n            style: styles.card,\n            children: _jsxs(Card.Content, {\n              children: [_jsxs(View, {\n                style: styles.header,\n                children: [_jsxs(Text, {\n                  variant: \"titleMedium\",\n                  style: {\n                    color: theme.colors.primary,\n                    fontWeight: 'bold'\n                  },\n                  children: [\"\\u0110\\u01A1n thu\\u1ED1c ng\\xE0y \", dayjs(prescription.created_at).format('DD/MM/YYYY')]\n                }), _jsx(Chip, {\n                  icon: \"doctor\",\n                  compact: true,\n                  children: (_prescription$doctor = prescription.doctor) == null ? void 0 : (_prescription$doctor$ = _prescription$doctor.user) == null ? void 0 : _prescription$doctor$.full_name\n                })]\n              }), _jsx(View, {\n                style: styles.content,\n                children: _jsx(Text, {\n                  numberOfLines: 2,\n                  variant: \"bodyMedium\",\n                  style: {\n                    color: '#666'\n                  },\n                  children: prescription.notes || 'Không có ghi chú'\n                })\n              })]\n            })\n          })\n        }, prescription.id);\n      })\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5'\n  },\n  center: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  emptyContainer: {\n    padding: 32,\n    alignItems: 'center'\n  },\n  list: {\n    padding: 16\n  },\n  card: {\n    marginBottom: 12,\n    elevation: 2\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 8\n  },\n  content: {\n    marginTop: 4\n  }\n});","map":{"version":3,"names":["React","View","StyleSheet","ScrollView","RefreshControl","TouchableOpacity","Card","Text","Chip","ActivityIndicator","useTheme","useQuery","useNavigation","prescriptionService","useAuthStore","dayjs","jsx","_jsx","jsxs","_jsxs","PrescriptionsScreen","theme","navigation","user","state","_useQuery","queryKey","patient_id","queryFn","getMyPrescriptions","enabled","data","isLoading","refetch","style","styles","center","children","size","container","refreshControl","refreshing","onRefresh","length","emptyContainer","variant","list","map","prescription","_prescription$doctor","_prescription$doctor$","onPress","navigate","id","card","Content","header","color","colors","primary","fontWeight","created_at","format","icon","compact","doctor","full_name","content","numberOfLines","notes","create","flex","backgroundColor","justifyContent","alignItems","padding","marginBottom","elevation","flexDirection","marginTop"],"sources":["D:/Student/N4_HK2/Web_App/clinic-starter/mobile/src/screens/PrescriptionsScreen.tsx"],"sourcesContent":["import React from 'react';\r\nimport { View, StyleSheet, ScrollView, RefreshControl, TouchableOpacity } from 'react-native';\r\nimport { Card, Text, Chip, ActivityIndicator, useTheme } from 'react-native-paper';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { prescriptionService } from '../services/prescription.service';\r\nimport { useAuthStore } from '../stores/authStore';\r\nimport dayjs from 'dayjs';\r\n\r\nexport default function PrescriptionsScreen() {\r\n    const theme = useTheme();\r\n    const navigation = useNavigation<any>();\r\n    const user = useAuthStore((state) => state.user);\r\n\r\n    const { data, isLoading, refetch } = useQuery({\r\n        queryKey: ['myPrescriptions', user?.patient_id],\r\n        queryFn: () => prescriptionService.getMyPrescriptions(user?.patient_id || ''),\r\n        enabled: !!user?.patient_id,\r\n    });\r\n\r\n    if (isLoading && !data) {\r\n        return (\r\n            <View style={styles.center}>\r\n                <ActivityIndicator size=\"large\" />\r\n            </View>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <ScrollView\r\n            style={styles.container}\r\n            refreshControl={<RefreshControl refreshing={isLoading} onRefresh={refetch} />}\r\n        >\r\n            {!data || data.length === 0 ? (\r\n                <View style={styles.emptyContainer}>\r\n                    <Text variant=\"bodyLarge\">Bạn chưa có đơn thuốc nào.</Text>\r\n                </View>\r\n            ) : (\r\n                <View style={styles.list}>\r\n                    {data.map((prescription: any) => (\r\n                        <TouchableOpacity\r\n                            key={prescription.id}\r\n                            onPress={() => navigation.navigate('PrescriptionDetail', { id: prescription.id })}\r\n                        >\r\n                            <Card style={styles.card}>\r\n                                <Card.Content>\r\n                                    <View style={styles.header}>\r\n                                        <Text variant=\"titleMedium\" style={{ color: theme.colors.primary, fontWeight: 'bold' }}>\r\n                                            Đơn thuốc ngày {dayjs(prescription.created_at).format('DD/MM/YYYY')}\r\n                                        </Text>\r\n                                        <Chip icon=\"doctor\" compact>{prescription.doctor?.user?.full_name}</Chip>\r\n                                    </View>\r\n\r\n                                    <View style={styles.content}>\r\n                                        <Text numberOfLines={2} variant=\"bodyMedium\" style={{ color: '#666' }}>\r\n                                            {prescription.notes || 'Không có ghi chú'}\r\n                                        </Text>\r\n                                    </View>\r\n                                </Card.Content>\r\n                            </Card>\r\n                        </TouchableOpacity>\r\n                    ))}\r\n                </View>\r\n            )}\r\n        </ScrollView>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: { flex: 1, backgroundColor: '#f5f5f5' },\r\n    center: { flex: 1, justifyContent: 'center', alignItems: 'center' },\r\n    emptyContainer: { padding: 32, alignItems: 'center' },\r\n    list: { padding: 16 },\r\n    card: { marginBottom: 12, elevation: 2 },\r\n    header: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', marginBottom: 8 },\r\n    content: { marginTop: 4 },\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}