{"ast":null,"code":"import axiosInstance from \"../lib/axios\";\nexport var appointmentService = {\n  getMyAppointments: function getMyAppointments() {\n    return axiosInstance.get('/appointments').then(function (res) {\n      return res.data;\n    });\n  },\n  getAppointmentById: function getAppointmentById(id) {\n    return axiosInstance.get(\"/appointments/\" + id).then(function (res) {\n      return res.data;\n    });\n  },\n  getBranches: function getBranches() {\n    return axiosInstance.get('/branches').then(function (res) {\n      return res.data;\n    });\n  },\n  getSpecialties: function getSpecialties() {\n    return axiosInstance.get('/specialties').then(function (res) {\n      return res.data;\n    });\n  },\n  getDoctors: function getDoctors(branchId, specialtyId) {\n    var params = {};\n    if (branchId) params.branch_id = branchId;\n    if (specialtyId) params.specialty_id = specialtyId;\n    return axiosInstance.get('/doctors', {\n      params: params\n    }).then(function (res) {\n      return res.data;\n    });\n  },\n  getAvailableSlots: function getAvailableSlots(branchId, specialtyId, date, doctorId) {\n    var params = {\n      branch_id: branchId,\n      specialization_id: specialtyId,\n      date: date,\n      doctor_id: doctorId || undefined\n    };\n    return axiosInstance.get('/appointments/available-slots', {\n      params: params\n    }).then(function (res) {\n      return res.data;\n    });\n  },\n  createAppointment: function createAppointment(data) {\n    return axiosInstance.post('/appointments', data).then(function (res) {\n      return res.data;\n    });\n  }\n};","map":{"version":3,"names":["axiosInstance","appointmentService","getMyAppointments","get","then","res","data","getAppointmentById","id","getBranches","getSpecialties","getDoctors","branchId","specialtyId","params","branch_id","specialty_id","getAvailableSlots","date","doctorId","specialization_id","doctor_id","undefined","createAppointment","post"],"sources":["D:/Student/N4_HK2/Web_App/clinic-starter/mobile/src/services/appointment.service.ts"],"sourcesContent":["import axiosInstance from '../lib/axios';\r\n\r\n// --- INTERFACES CŨ (GIỮ LẠI ĐỂ KHÔNG LỖI APP) ---\r\nexport interface Appointment {\r\n  id: string;\r\n  patient_id: string;\r\n  doctor_assigned_id: string;\r\n  room_id: string;\r\n  start_time: string;\r\n  end_time: string;\r\n  status: string;\r\n  appointment_type: string;\r\n  notes?: string;\r\n  doctor?: {\r\n    code: string;\r\n    title: string;\r\n    user: {\r\n      full_name: string;\r\n    };\r\n  };\r\n  room?: {\r\n    name: string;\r\n    code: string;\r\n  };\r\n}\r\n\r\nexport interface AppointmentListResponse {\r\n  data: Appointment[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n  };\r\n}\r\n\r\n// --- INTERFACES CHO TÍNH NĂNG MỚI ---\r\nexport interface Branch {\r\n  id: string;\r\n  name: string;\r\n  address: string;\r\n}\r\n\r\nexport interface Specialty {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\nexport interface Doctor {\r\n  id: string;\r\n  user: {\r\n    full_name: string;\r\n  };\r\n  specialty_id: string;\r\n}\r\n\r\nexport interface CreateAppointmentDto {\r\n  patient_id: string; // Thêm trường này theo yêu cầu backend\r\n  doctor_assigned_id?: string;\r\n  branch_id: string;\r\n  start_time: string;\r\n  end_time: string;\r\n  notes: string;\r\n  appointment_type?: string;\r\n  source?: string;\r\n}\r\n\r\n// --- SERVICE ĐẦY ĐỦ ---\r\nexport const appointmentService = {\r\n\r\n  // 1. CÁC HÀM CŨ (KHÔI PHỤC LẠI) - Để màn hình Danh sách & Chi tiết chạy được\r\n  getMyAppointments: (): Promise<AppointmentListResponse> => {\r\n    return axiosInstance.get('/appointments').then((res) => res.data);\r\n  },\r\n\r\n  getAppointmentById: (id: string): Promise<Appointment> => {\r\n    return axiosInstance.get(`/appointments/${id}`).then((res) => res.data);\r\n  },\r\n\r\n  // 2. CÁC HÀM CHO FORM ĐẶT LỊCH (Branches, Specialties, Doctors)\r\n  getBranches: (): Promise<Branch[]> => {\r\n    return axiosInstance.get('/branches').then((res) => res.data);\r\n  },\r\n\r\n  getSpecialties: (): Promise<Specialty[]> => {\r\n    return axiosInstance.get('/specialties').then((res) => res.data);\r\n  },\r\n\r\n  getDoctors: (branchId?: string, specialtyId?: string): Promise<Doctor[]> => {\r\n    const params: any = {};\r\n    if (branchId) params.branch_id = branchId;\r\n    if (specialtyId) params.specialty_id = specialtyId;\r\n    return axiosInstance.get('/doctors', { params }).then((res) => res.data);\r\n  },\r\n\r\n  // 3. HÀM MỚI QUAN TRỌNG: Lấy Slot Trống (Kết nối Backend thật)\r\n  getAvailableSlots: (branchId: string, specialtyId: string, date: string, doctorId?: string): Promise<string[]> => {\r\n    const params = {\r\n      branch_id: branchId,\r\n      specialization_id: specialtyId, // Backend dùng tên 'specialization_id'\r\n      date: date,\r\n      doctor_id: doctorId || undefined\r\n    };\r\n    return axiosInstance.get('/appointments/available-slots', { params }).then((res) => res.data);\r\n  },\r\n\r\n  // 4. Tạo lịch hẹn\r\n  createAppointment: (data: CreateAppointmentDto): Promise<any> => {\r\n    return axiosInstance.post('/appointments', data).then((res) => res.data);\r\n  },\r\n};"],"mappings":"AAAA,OAAOA,aAAa;AAoEpB,OAAO,IAAMC,kBAAkB,GAAG;EAGhCC,iBAAiB,EAAE,SAAnBA,iBAAiBA,CAAA,EAA0C;IACzD,OAAOF,aAAa,CAACG,GAAG,CAAC,eAAe,CAAC,CAACC,IAAI,CAAC,UAACC,GAAG;MAAA,OAAKA,GAAG,CAACC,IAAI;IAAA,EAAC;EACnE,CAAC;EAEDC,kBAAkB,EAAE,SAApBA,kBAAkBA,CAAGC,EAAU,EAA2B;IACxD,OAAOR,aAAa,CAACG,GAAG,oBAAkBK,EAAI,CAAC,CAACJ,IAAI,CAAC,UAACC,GAAG;MAAA,OAAKA,GAAG,CAACC,IAAI;IAAA,EAAC;EACzE,CAAC;EAGDG,WAAW,EAAE,SAAbA,WAAWA,CAAA,EAA2B;IACpC,OAAOT,aAAa,CAACG,GAAG,CAAC,WAAW,CAAC,CAACC,IAAI,CAAC,UAACC,GAAG;MAAA,OAAKA,GAAG,CAACC,IAAI;IAAA,EAAC;EAC/D,CAAC;EAEDI,cAAc,EAAE,SAAhBA,cAAcA,CAAA,EAA8B;IAC1C,OAAOV,aAAa,CAACG,GAAG,CAAC,cAAc,CAAC,CAACC,IAAI,CAAC,UAACC,GAAG;MAAA,OAAKA,GAAG,CAACC,IAAI;IAAA,EAAC;EAClE,CAAC;EAEDK,UAAU,EAAE,SAAZA,UAAUA,CAAGC,QAAiB,EAAEC,WAAoB,EAAwB;IAC1E,IAAMC,MAAW,GAAG,CAAC,CAAC;IACtB,IAAIF,QAAQ,EAAEE,MAAM,CAACC,SAAS,GAAGH,QAAQ;IACzC,IAAIC,WAAW,EAAEC,MAAM,CAACE,YAAY,GAAGH,WAAW;IAClD,OAAOb,aAAa,CAACG,GAAG,CAAC,UAAU,EAAE;MAAEW,MAAM,EAANA;IAAO,CAAC,CAAC,CAACV,IAAI,CAAC,UAACC,GAAG;MAAA,OAAKA,GAAG,CAACC,IAAI;IAAA,EAAC;EAC1E,CAAC;EAGDW,iBAAiB,EAAE,SAAnBA,iBAAiBA,CAAGL,QAAgB,EAAEC,WAAmB,EAAEK,IAAY,EAAEC,QAAiB,EAAwB;IAChH,IAAML,MAAM,GAAG;MACbC,SAAS,EAAEH,QAAQ;MACnBQ,iBAAiB,EAAEP,WAAW;MAC9BK,IAAI,EAAEA,IAAI;MACVG,SAAS,EAAEF,QAAQ,IAAIG;IACzB,CAAC;IACD,OAAOtB,aAAa,CAACG,GAAG,CAAC,+BAA+B,EAAE;MAAEW,MAAM,EAANA;IAAO,CAAC,CAAC,CAACV,IAAI,CAAC,UAACC,GAAG;MAAA,OAAKA,GAAG,CAACC,IAAI;IAAA,EAAC;EAC/F,CAAC;EAGDiB,iBAAiB,EAAE,SAAnBA,iBAAiBA,CAAGjB,IAA0B,EAAmB;IAC/D,OAAON,aAAa,CAACwB,IAAI,CAAC,eAAe,EAAElB,IAAI,CAAC,CAACF,IAAI,CAAC,UAACC,GAAG;MAAA,OAAKA,GAAG,CAACC,IAAI;IAAA,EAAC;EAC1E;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}