{"ast":null,"code":"import React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Card from \"react-native-paper/lib/module/components/Card/Card\";\nimport Text from \"react-native-paper/lib/module/components/Typography/Text\";\nimport Divider from \"react-native-paper/lib/module/components/Divider\";\nimport ActivityIndicator from \"react-native-paper/lib/module/components/ActivityIndicator\";\nimport { useTheme } from \"react-native-paper/lib/module/core/theming\";\nimport { useQuery } from '@tanstack/react-query';\nimport { prescriptionService } from \"../services/prescription.service\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar SCREEN_WIDTH = Dimensions.get('window').width;\nexport default function InvoiceDetailScreen(_ref) {\n  var route = _ref.route;\n  var id = route.params.id;\n  var theme = useTheme();\n  var _useQuery = useQuery({\n      queryKey: ['invoice', id],\n      queryFn: function queryFn() {\n        return prescriptionService.getInvoiceById(id);\n      }\n    }),\n    invoice = _useQuery.data,\n    isLoading = _useQuery.isLoading;\n  if (isLoading) return _jsx(View, {\n    style: styles.center,\n    children: _jsx(ActivityIndicator, {})\n  });\n  if (!invoice) return _jsx(View, {\n    style: styles.center,\n    children: _jsx(Text, {\n      children: \"L\\u1ED7i t\\u1EA3i h\\xF3a \\u0111\\u01A1n\"\n    })\n  });\n  var bankId = 'MB';\n  var accountNo = '0988888888';\n  var accountName = 'PHONG KHAM';\n  var qrUrl = \"https://img.vietqr.io/image/\" + bankId + \"-\" + accountNo + \"-compact2.png?amount=\" + invoice.total_amount + \"&addInfo=TT \" + invoice.id.slice(0, 8) + \"&accountName=\" + encodeURIComponent(accountName);\n  return _jsxs(ScrollView, {\n    style: styles.container,\n    children: [_jsx(Card, {\n      style: [styles.card, {\n        borderLeftWidth: 5,\n        borderLeftColor: invoice.status === 'PAID' ? 'green' : 'red'\n      }],\n      children: _jsxs(Card.Content, {\n        style: {\n          alignItems: 'center'\n        },\n        children: [_jsxs(Text, {\n          variant: \"headlineSmall\",\n          style: {\n            fontWeight: 'bold',\n            color: invoice.status === 'PAID' ? 'green' : 'red'\n          },\n          children: [Number(invoice.total_amount).toLocaleString(), \" \\u20AB\"]\n        }), _jsx(Text, {\n          style: {\n            marginTop: 4,\n            color: '#666'\n          },\n          children: invoice.status === 'PAID' ? 'ĐÃ THANH TOÁN' : 'CHƯA THANH TOÁN'\n        })]\n      })\n    }), invoice.status === 'UNPAID' && _jsxs(Card, {\n      style: styles.card,\n      children: [_jsx(Card.Title, {\n        title: \"Qu\\xE9t m\\xE3 \\u0111\\u1EC3 thanh to\\xE1n\"\n      }), _jsxs(Card.Content, {\n        style: {\n          alignItems: 'center'\n        },\n        children: [_jsx(Image, {\n          source: {\n            uri: qrUrl\n          },\n          style: {\n            width: SCREEN_WIDTH - 100,\n            height: SCREEN_WIDTH - 100\n          },\n          resizeMode: \"contain\"\n        }), _jsxs(Text, {\n          style: {\n            marginTop: 12,\n            textAlign: 'center',\n            color: '#666'\n          },\n          children: [\"Ng\\xE2n h\\xE0ng MB Bank\", '\\n', \"STK: \", accountNo]\n        })]\n      })]\n    }), _jsxs(Card, {\n      style: styles.card,\n      children: [_jsx(Card.Title, {\n        title: \"Chi ti\\u1EBFt d\\u1ECBch v\\u1EE5\"\n      }), _jsxs(Card.Content, {\n        children: [invoice.items.map(function (item, index) {\n          return _jsxs(View, {\n            children: [_jsxs(View, {\n              style: styles.itemRow,\n              children: [_jsxs(View, {\n                style: {\n                  flex: 1\n                },\n                children: [_jsx(Text, {\n                  style: {\n                    fontWeight: 'bold'\n                  },\n                  children: item.description\n                }), _jsxs(Text, {\n                  style: {\n                    fontSize: 12,\n                    color: '#666'\n                  },\n                  children: [\"SL: \", item.quantity]\n                })]\n              }), _jsxs(Text, {\n                children: [Number(item.amount).toLocaleString(), \" \\u20AB\"]\n              })]\n            }), index < invoice.items.length - 1 && _jsx(Divider, {\n              style: {\n                marginVertical: 8\n              }\n            })]\n          }, index);\n        }), _jsx(Divider, {\n          style: {\n            marginVertical: 12,\n            height: 2\n          }\n        }), _jsxs(View, {\n          style: styles.totalRow,\n          children: [_jsx(Text, {\n            variant: \"titleMedium\",\n            children: \"T\\u1ED5ng c\\u1ED9ng:\"\n          }), _jsxs(Text, {\n            variant: \"titleMedium\",\n            style: {\n              fontWeight: 'bold',\n              color: theme.colors.primary\n            },\n            children: [Number(invoice.total_amount).toLocaleString(), \" \\u20AB\"]\n          })]\n        })]\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5',\n    padding: 16\n  },\n  center: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  card: {\n    marginBottom: 16,\n    backgroundColor: 'white',\n    borderRadius: 8\n  },\n  itemRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  },\n  totalRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  }\n});","map":{"version":3,"names":["React","View","StyleSheet","ScrollView","Image","Dimensions","Card","Text","Divider","ActivityIndicator","useTheme","useQuery","prescriptionService","jsx","_jsx","jsxs","_jsxs","SCREEN_WIDTH","get","width","InvoiceDetailScreen","_ref","route","id","params","theme","_useQuery","queryKey","queryFn","getInvoiceById","invoice","data","isLoading","style","styles","center","children","bankId","accountNo","accountName","qrUrl","total_amount","slice","encodeURIComponent","container","card","borderLeftWidth","borderLeftColor","status","Content","alignItems","variant","fontWeight","color","Number","toLocaleString","marginTop","Title","title","source","uri","height","resizeMode","textAlign","items","map","item","index","itemRow","flex","description","fontSize","quantity","amount","length","marginVertical","totalRow","colors","primary","create","backgroundColor","padding","justifyContent","marginBottom","borderRadius","flexDirection"],"sources":["D:/Student/N4_HK2/Web_App/clinic-starter/mobile/src/screens/InvoiceDetailScreen.tsx"],"sourcesContent":["import React from 'react';\r\nimport { View, StyleSheet, ScrollView, Image, Dimensions } from 'react-native';\r\nimport { Card, Text, Divider, Button, ActivityIndicator, useTheme } from 'react-native-paper';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport { prescriptionService } from '../services/prescription.service';\r\n\r\nconst SCREEN_WIDTH = Dimensions.get('window').width;\r\n\r\nexport default function InvoiceDetailScreen({ route }: any) {\r\n    const { id } = route.params;\r\n    const theme = useTheme();\r\n\r\n    const { data: invoice, isLoading } = useQuery({\r\n        queryKey: ['invoice', id],\r\n        queryFn: () => prescriptionService.getInvoiceById(id),\r\n    });\r\n\r\n    if (isLoading) return <View style={styles.center}><ActivityIndicator /></View>;\r\n    if (!invoice) return <View style={styles.center}><Text>Lỗi tải hóa đơn</Text></View>;\r\n\r\n    // Tạo link QR VietQR\r\n    const bankId = 'MB';\r\n    const accountNo = '0988888888';\r\n    const accountName = 'PHONG KHAM';\r\n    const qrUrl = `https://img.vietqr.io/image/${bankId}-${accountNo}-compact2.png?amount=${invoice.total_amount}&addInfo=TT ${invoice.id.slice(0, 8)}&accountName=${encodeURIComponent(accountName)}`;\r\n\r\n    return (\r\n        <ScrollView style={styles.container}>\r\n            {/* TRẠNG THÁI */}\r\n            <Card style={[styles.card, { borderLeftWidth: 5, borderLeftColor: invoice.status === 'PAID' ? 'green' : 'red' }]}>\r\n                <Card.Content style={{ alignItems: 'center' }}>\r\n                    <Text variant=\"headlineSmall\" style={{ fontWeight: 'bold', color: invoice.status === 'PAID' ? 'green' : 'red' }}>\r\n                        {Number(invoice.total_amount).toLocaleString()} ₫\r\n                    </Text>\r\n                    <Text style={{ marginTop: 4, color: '#666' }}>\r\n                        {invoice.status === 'PAID' ? 'ĐÃ THANH TOÁN' : 'CHƯA THANH TOÁN'}\r\n                    </Text>\r\n                </Card.Content>\r\n            </Card>\r\n\r\n            {/* MÃ QR (Chỉ hiện khi chưa thanh toán) */}\r\n            {invoice.status === 'UNPAID' && (\r\n                <Card style={styles.card}>\r\n                    <Card.Title title=\"Quét mã để thanh toán\" />\r\n                    <Card.Content style={{ alignItems: 'center' }}>\r\n                        <Image\r\n                            source={{ uri: qrUrl }}\r\n                            style={{ width: SCREEN_WIDTH - 100, height: SCREEN_WIDTH - 100 }}\r\n                            resizeMode=\"contain\"\r\n                        />\r\n                        <Text style={{ marginTop: 12, textAlign: 'center', color: '#666' }}>\r\n                            Ngân hàng MB Bank{'\\n'}STK: {accountNo}\r\n                        </Text>\r\n                    </Card.Content>\r\n                </Card>\r\n            )}\r\n\r\n            {/* CHI TIẾT DỊCH VỤ */}\r\n            <Card style={styles.card}>\r\n                <Card.Title title=\"Chi tiết dịch vụ\" />\r\n                <Card.Content>\r\n                    {invoice.items.map((item: any, index: number) => (\r\n                        <View key={index}>\r\n                            <View style={styles.itemRow}>\r\n                                <View style={{ flex: 1 }}>\r\n                                    <Text style={{ fontWeight: 'bold' }}>{item.description}</Text>\r\n                                    <Text style={{ fontSize: 12, color: '#666' }}>SL: {item.quantity}</Text>\r\n                                </View>\r\n                                <Text>{Number(item.amount).toLocaleString()} ₫</Text>\r\n                            </View>\r\n                            {index < invoice.items.length - 1 && <Divider style={{ marginVertical: 8 }} />}\r\n                        </View>\r\n                    ))}\r\n                    <Divider style={{ marginVertical: 12, height: 2 }} />\r\n                    <View style={styles.totalRow}>\r\n                        <Text variant=\"titleMedium\">Tổng cộng:</Text>\r\n                        <Text variant=\"titleMedium\" style={{ fontWeight: 'bold', color: theme.colors.primary }}>\r\n                            {Number(invoice.total_amount).toLocaleString()} ₫\r\n                        </Text>\r\n                    </View>\r\n                </Card.Content>\r\n            </Card>\r\n        </ScrollView>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: { flex: 1, backgroundColor: '#f5f5f5', padding: 16 },\r\n    center: { flex: 1, justifyContent: 'center', alignItems: 'center' },\r\n    card: { marginBottom: 16, backgroundColor: 'white', borderRadius: 8 },\r\n    itemRow: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' },\r\n    totalRow: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' },\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}