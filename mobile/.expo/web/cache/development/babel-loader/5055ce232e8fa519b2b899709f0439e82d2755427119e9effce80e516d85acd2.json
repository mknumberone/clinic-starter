{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Text from \"react-native-paper/lib/module/components/Typography/Text\";\nimport Button from \"react-native-paper/lib/module/components/Button/Button\";\nimport TextInput from \"react-native-paper/lib/module/components/TextInput/TextInput\";\nimport { useTheme } from \"react-native-paper/lib/module/core/theming\";\nimport Menu from \"react-native-paper/lib/module/components/Menu/Menu\";\nimport TouchableRipple from \"react-native-paper/lib/module/components/TouchableRipple/TouchableRipple\";\nimport HelperText from \"react-native-paper/lib/module/components/HelperText/HelperText\";\nimport ProgressBar from \"react-native-paper/lib/module/components/ProgressBar\";\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport DateTimePicker from '@react-native-community/datetimepicker';\nimport { appointmentService } from \"../services/appointment.service\";\nimport dayjs from 'dayjs';\nimport { useNavigation } from '@react-navigation/native';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function BookingScreen() {\n  var theme = useTheme();\n  var navigation = useNavigation();\n  var queryClient = useQueryClient();\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    selectedBranch = _useState2[0],\n    setSelectedBranch = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    selectedSpecialty = _useState4[0],\n    setSelectedSpecialty = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    selectedDoctor = _useState6[0],\n    setSelectedDoctor = _useState6[1];\n  var _useState7 = useState(new Date()),\n    _useState8 = _slicedToArray(_useState7, 2),\n    date = _useState8[0],\n    setDate = _useState8[1];\n  var _useState9 = useState(false),\n    _useState0 = _slicedToArray(_useState9, 2),\n    showDatePicker = _useState0[0],\n    setShowDatePicker = _useState0[1];\n  var _useState1 = useState(''),\n    _useState10 = _slicedToArray(_useState1, 2),\n    notes = _useState10[0],\n    setNotes = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    menuBranchVisible = _useState12[0],\n    setMenuBranchVisible = _useState12[1];\n  var _useState13 = useState(false),\n    _useState14 = _slicedToArray(_useState13, 2),\n    menuSpecialtyVisible = _useState14[0],\n    setMenuSpecialtyVisible = _useState14[1];\n  var _useState15 = useState(false),\n    _useState16 = _slicedToArray(_useState15, 2),\n    menuDoctorVisible = _useState16[0],\n    setMenuDoctorVisible = _useState16[1];\n  var _useQuery = useQuery({\n      queryKey: ['branches'],\n      queryFn: appointmentService.getBranches\n    }),\n    branches = _useQuery.data;\n  var _useQuery2 = useQuery({\n      queryKey: ['specialties'],\n      queryFn: appointmentService.getSpecialties\n    }),\n    specialties = _useQuery2.data;\n  var _useQuery3 = useQuery({\n      queryKey: ['doctors', selectedBranch, selectedSpecialty],\n      queryFn: function queryFn() {\n        return appointmentService.getDoctors(selectedBranch, selectedSpecialty);\n      },\n      enabled: !!selectedBranch\n    }),\n    doctors = _useQuery3.data,\n    loadingDoctors = _useQuery3.isFetching;\n  var createMutation = useMutation({\n    mutationFn: appointmentService.createAppointment,\n    onSuccess: function onSuccess() {\n      Alert.alert('Thành công', 'Đặt lịch khám thành công!');\n      queryClient.invalidateQueries(['myAppointments']);\n      navigation.navigate('Appointments');\n    },\n    onError: function onError(err) {\n      var _err$response, _err$response$data;\n      Alert.alert('Lỗi', (err == null ? void 0 : (_err$response = err.response) == null ? void 0 : (_err$response$data = _err$response.data) == null ? void 0 : _err$response$data.message) || 'Không thể đặt lịch');\n    }\n  });\n  var handleDateChange = function handleDateChange(event, selectedDate) {\n    setShowDatePicker(Platform.OS === 'ios');\n    if (selectedDate) setDate(selectedDate);\n  };\n  var handleSubmit = function handleSubmit() {\n    if (!selectedBranch) {\n      Alert.alert('Thiếu thông tin', 'Vui lòng chọn cơ sở khám');\n      return;\n    }\n    if (!notes.trim()) {\n      Alert.alert('Thiếu thông tin', 'Vui lòng nhập triệu chứng/lý do khám');\n      return;\n    }\n    createMutation.mutate({\n      branch_id: selectedBranch,\n      doctor_id: selectedDoctor || undefined,\n      start_time: date.toISOString(),\n      notes: notes\n    });\n  };\n  var getBranchName = function getBranchName() {\n    var _branches$find;\n    return (branches == null ? void 0 : (_branches$find = branches.find(function (b) {\n      return b.id === selectedBranch;\n    })) == null ? void 0 : _branches$find.name) || 'Chọn chi nhánh';\n  };\n  var getSpecialtyName = function getSpecialtyName() {\n    var _specialties$find;\n    return (specialties == null ? void 0 : (_specialties$find = specialties.find(function (s) {\n      return s.id === selectedSpecialty;\n    })) == null ? void 0 : _specialties$find.name) || 'Tất cả chuyên khoa';\n  };\n  var getDoctorName = function getDoctorName() {\n    var _doctors$find;\n    return (doctors == null ? void 0 : (_doctors$find = doctors.find(function (d) {\n      return d.id === selectedDoctor;\n    })) == null ? void 0 : _doctors$find.user.full_name) || 'Chọn bác sĩ (hoặc để trống)';\n  };\n  return _jsx(KeyboardAvoidingView, {\n    behavior: Platform.OS === 'ios' ? 'padding' : undefined,\n    style: {\n      flex: 1\n    },\n    children: _jsxs(ScrollView, {\n      style: styles.container,\n      contentContainerStyle: {\n        paddingBottom: 40\n      },\n      children: [_jsxs(View, {\n        style: styles.stepContainer,\n        children: [_jsx(Text, {\n          variant: \"titleMedium\",\n          style: {\n            fontWeight: 'bold',\n            color: theme.colors.primary\n          },\n          children: \"1. Th\\xF4ng tin kh\\xE1m\"\n        }), _jsx(ProgressBar, {\n          progress: 0.5,\n          color: theme.colors.primary,\n          style: {\n            marginTop: 8,\n            borderRadius: 4\n          }\n        })]\n      }), _jsxs(View, {\n        style: styles.formContainer,\n        children: [_jsxs(View, {\n          style: styles.inputGroup,\n          children: [_jsxs(Text, {\n            style: styles.label,\n            children: [\"C\\u01A1 s\\u1EDF kh\\xE1m \", _jsx(Text, {\n              style: {\n                color: 'red'\n              },\n              children: \"*\"\n            })]\n          }), _jsx(Menu, {\n            visible: menuBranchVisible,\n            onDismiss: function onDismiss() {\n              return setMenuBranchVisible(false);\n            },\n            anchor: _jsx(TouchableRipple, {\n              onPress: function onPress() {\n                return setMenuBranchVisible(true);\n              },\n              style: styles.dropdown,\n              children: _jsxs(View, {\n                style: styles.dropdownContent,\n                children: [_jsx(Text, {\n                  style: {\n                    color: selectedBranch ? 'black' : '#777'\n                  },\n                  children: getBranchName()\n                }), _jsx(Menu.Icon, {\n                  icon: \"chevron-down\",\n                  size: 20\n                })]\n              })\n            }),\n            children: branches == null ? void 0 : branches.map(function (branch) {\n              return _jsx(Menu.Item, {\n                onPress: function onPress() {\n                  setSelectedBranch(branch.id);\n                  setMenuBranchVisible(false);\n                },\n                title: branch.name\n              }, branch.id);\n            })\n          })]\n        }), _jsxs(View, {\n          style: styles.inputGroup,\n          children: [_jsx(Text, {\n            style: styles.label,\n            children: \"Chuy\\xEAn khoa (L\\u1ECDc b\\xE1c s\\u0129)\"\n          }), _jsxs(Menu, {\n            visible: menuSpecialtyVisible,\n            onDismiss: function onDismiss() {\n              return setMenuSpecialtyVisible(false);\n            },\n            anchor: _jsx(TouchableRipple, {\n              onPress: function onPress() {\n                return setMenuSpecialtyVisible(true);\n              },\n              style: styles.dropdown,\n              children: _jsxs(View, {\n                style: styles.dropdownContent,\n                children: [_jsx(Text, {\n                  style: {\n                    color: selectedSpecialty ? 'black' : '#777'\n                  },\n                  children: getSpecialtyName()\n                }), _jsx(Menu.Icon, {\n                  icon: \"chevron-down\",\n                  size: 20\n                })]\n              })\n            }),\n            children: [_jsx(Menu.Item, {\n              onPress: function onPress() {\n                setSelectedSpecialty('');\n                setMenuSpecialtyVisible(false);\n              },\n              title: \"T\\u1EA5t c\\u1EA3 chuy\\xEAn khoa\"\n            }), specialties == null ? void 0 : specialties.map(function (spec) {\n              return _jsx(Menu.Item, {\n                onPress: function onPress() {\n                  setSelectedSpecialty(spec.id);\n                  setMenuSpecialtyVisible(false);\n                },\n                title: spec.name\n              }, spec.id);\n            })]\n          })]\n        }), _jsxs(View, {\n          style: styles.inputGroup,\n          children: [_jsx(Text, {\n            style: styles.label,\n            children: \"B\\xE1c s\\u0129 kh\\xE1m\"\n          }), _jsxs(Menu, {\n            visible: menuDoctorVisible,\n            onDismiss: function onDismiss() {\n              return setMenuDoctorVisible(false);\n            },\n            anchor: _jsx(TouchableRipple, {\n              onPress: function onPress() {\n                return !selectedBranch ? Alert.alert('Lưu ý', 'Vui lòng chọn cơ sở trước') : setMenuDoctorVisible(true);\n              },\n              style: [styles.dropdown, !selectedBranch && {\n                backgroundColor: '#f0f0f0'\n              }],\n              children: _jsxs(View, {\n                style: styles.dropdownContent,\n                children: [_jsx(Text, {\n                  style: {\n                    color: selectedDoctor ? 'black' : '#777'\n                  },\n                  children: loadingDoctors ? 'Đang tải...' : getDoctorName()\n                }), _jsx(Menu.Icon, {\n                  icon: \"chevron-down\",\n                  size: 20\n                })]\n              })\n            }),\n            children: [_jsx(Menu.Item, {\n              onPress: function onPress() {\n                setSelectedDoctor('');\n                setMenuDoctorVisible(false);\n              },\n              title: \"Ch\\u1ECDn b\\xE1c s\\u0129 ng\\u1EABu nhi\\xEAn\"\n            }), doctors == null ? void 0 : doctors.map(function (doc) {\n              return _jsx(Menu.Item, {\n                onPress: function onPress() {\n                  setSelectedDoctor(doc.id);\n                  setMenuDoctorVisible(false);\n                },\n                title: doc.user.full_name\n              }, doc.id);\n            })]\n          }), !selectedBranch && _jsx(HelperText, {\n            type: \"info\",\n            children: \"Vui l\\xF2ng ch\\u1ECDn c\\u01A1 s\\u1EDF \\u0111\\u1EC3 xem danh s\\xE1ch b\\xE1c s\\u0129\"\n          })]\n        }), _jsxs(View, {\n          style: styles.inputGroup,\n          children: [_jsxs(Text, {\n            style: styles.label,\n            children: [\"Ng\\xE0y kh\\xE1m \", _jsx(Text, {\n              style: {\n                color: 'red'\n              },\n              children: \"*\"\n            })]\n          }), _jsx(TouchableRipple, {\n            onPress: function onPress() {\n              return setShowDatePicker(true);\n            },\n            style: styles.dropdown,\n            children: _jsxs(View, {\n              style: styles.dropdownContent,\n              children: [_jsx(Text, {\n                children: dayjs(date).format('DD/MM/YYYY HH:mm')\n              }), _jsx(Menu.Icon, {\n                icon: \"calendar\",\n                size: 20\n              })]\n            })\n          }), showDatePicker && _jsx(DateTimePicker, {\n            value: date,\n            mode: \"date\",\n            display: Platform.OS === 'ios' ? 'spinner' : 'default',\n            onChange: handleDateChange,\n            minimumDate: new Date()\n          })]\n        }), _jsxs(View, {\n          style: styles.inputGroup,\n          children: [_jsxs(Text, {\n            style: styles.label,\n            children: [\"Tri\\u1EC7u ch\\u1EE9ng / L\\xFD do \", _jsx(Text, {\n              style: {\n                color: 'red'\n              },\n              children: \"*\"\n            })]\n          }), _jsx(TextInput, {\n            mode: \"outlined\",\n            placeholder: \"Nh\\u1EADp tri\\u1EC7u ch\\u1EE9ng (VD: \\u0110au \\u0111\\u1EA7u, s\\u1ED1t...)\",\n            multiline: true,\n            numberOfLines: 4,\n            value: notes,\n            onChangeText: setNotes,\n            style: {\n              backgroundColor: 'white'\n            }\n          })]\n        }), _jsxs(View, {\n          style: styles.buttonRow,\n          children: [_jsx(Button, {\n            mode: \"outlined\",\n            onPress: function onPress() {\n              return navigation.goBack();\n            },\n            style: {\n              flex: 1\n            },\n            children: \"Quay l\\u1EA1i\"\n          }), _jsx(View, {\n            style: {\n              width: 12\n            }\n          }), _jsx(Button, {\n            mode: \"contained\",\n            onPress: handleSubmit,\n            loading: createMutation.isPending,\n            style: {\n              flex: 1\n            },\n            children: \"Ti\\u1EBFp t\\u1EE5c\"\n          })]\n        })]\n      })]\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff'\n  },\n  stepContainer: {\n    padding: 16,\n    backgroundColor: '#f9f9f9',\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee'\n  },\n  formContainer: {\n    padding: 16\n  },\n  inputGroup: {\n    marginBottom: 20\n  },\n  label: {\n    marginBottom: 8,\n    fontWeight: '500',\n    color: '#333'\n  },\n  dropdown: {\n    borderWidth: 1,\n    borderColor: '#ccc',\n    borderRadius: 4,\n    padding: 14,\n    backgroundColor: 'white'\n  },\n  dropdownContent: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  },\n  buttonRow: {\n    flexDirection: 'row',\n    marginTop: 10,\n    marginBottom: 20\n  }\n});","map":{"version":3,"names":["React","useState","View","StyleSheet","ScrollView","Platform","KeyboardAvoidingView","Alert","Text","Button","TextInput","useTheme","Menu","TouchableRipple","HelperText","ProgressBar","useQuery","useMutation","useQueryClient","DateTimePicker","appointmentService","dayjs","useNavigation","jsx","_jsx","jsxs","_jsxs","BookingScreen","theme","navigation","queryClient","_useState","_useState2","_slicedToArray","selectedBranch","setSelectedBranch","_useState3","_useState4","selectedSpecialty","setSelectedSpecialty","_useState5","_useState6","selectedDoctor","setSelectedDoctor","_useState7","Date","_useState8","date","setDate","_useState9","_useState0","showDatePicker","setShowDatePicker","_useState1","_useState10","notes","setNotes","_useState11","_useState12","menuBranchVisible","setMenuBranchVisible","_useState13","_useState14","menuSpecialtyVisible","setMenuSpecialtyVisible","_useState15","_useState16","menuDoctorVisible","setMenuDoctorVisible","_useQuery","queryKey","queryFn","getBranches","branches","data","_useQuery2","getSpecialties","specialties","_useQuery3","getDoctors","enabled","doctors","loadingDoctors","isFetching","createMutation","mutationFn","createAppointment","onSuccess","alert","invalidateQueries","navigate","onError","err","_err$response","_err$response$data","response","message","handleDateChange","event","selectedDate","OS","handleSubmit","trim","mutate","branch_id","doctor_id","undefined","start_time","toISOString","getBranchName","_branches$find","find","b","id","name","getSpecialtyName","_specialties$find","s","getDoctorName","_doctors$find","d","user","full_name","behavior","style","flex","children","styles","container","contentContainerStyle","paddingBottom","stepContainer","variant","fontWeight","color","colors","primary","progress","marginTop","borderRadius","formContainer","inputGroup","label","visible","onDismiss","anchor","onPress","dropdown","dropdownContent","Icon","icon","size","map","branch","Item","title","spec","backgroundColor","doc","type","format","value","mode","display","onChange","minimumDate","placeholder","multiline","numberOfLines","onChangeText","buttonRow","goBack","width","loading","isPending","create","padding","borderBottomWidth","borderBottomColor","marginBottom","borderWidth","borderColor","flexDirection","justifyContent","alignItems"],"sources":["D:/Student/N4_HK2/Web_App/clinic-starter/mobile/src/screens/BookingScreen.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, StyleSheet, ScrollView, Platform, KeyboardAvoidingView, Alert } from 'react-native';\r\nimport { Text, Button, TextInput, useTheme, Menu, TouchableRipple, HelperText, ProgressBar } from 'react-native-paper';\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport DateTimePicker from '@react-native-community/datetimepicker';\r\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\r\nimport { appointmentService } from '../services/appointment.service';\r\nimport dayjs from 'dayjs';\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\nexport default function BookingScreen() {\r\n    const theme = useTheme();\r\n    const navigation = useNavigation<any>();\r\n    const queryClient = useQueryClient();\r\n\r\n    // --- FORM STATE ---\r\n    const [selectedBranch, setSelectedBranch] = useState<string>('');\r\n    const [selectedSpecialty, setSelectedSpecialty] = useState<string>('');\r\n    const [selectedDoctor, setSelectedDoctor] = useState<string>('');\r\n    const [date, setDate] = useState(new Date());\r\n    const [showDatePicker, setShowDatePicker] = useState(false);\r\n    const [notes, setNotes] = useState('');\r\n\r\n    // --- UI STATE (Dropdown Menus) ---\r\n    const [menuBranchVisible, setMenuBranchVisible] = useState(false);\r\n    const [menuSpecialtyVisible, setMenuSpecialtyVisible] = useState(false);\r\n    const [menuDoctorVisible, setMenuDoctorVisible] = useState(false);\r\n\r\n    // --- DATA FETCHING ---\r\n    const { data: branches } = useQuery({ queryKey: ['branches'], queryFn: appointmentService.getBranches });\r\n    const { data: specialties } = useQuery({ queryKey: ['specialties'], queryFn: appointmentService.getSpecialties });\r\n\r\n    // Fetch doctors based on filters\r\n    const { data: doctors, isFetching: loadingDoctors } = useQuery({\r\n        queryKey: ['doctors', selectedBranch, selectedSpecialty],\r\n        queryFn: () => appointmentService.getDoctors(selectedBranch, selectedSpecialty),\r\n        enabled: !!selectedBranch, // Chỉ tải bác sĩ khi đã chọn chi nhánh\r\n    });\r\n\r\n    // --- MUTATION (Gửi đặt lịch) ---\r\n    const createMutation = useMutation({\r\n        mutationFn: appointmentService.createAppointment,\r\n        onSuccess: () => {\r\n            Alert.alert('Thành công', 'Đặt lịch khám thành công!');\r\n            queryClient.invalidateQueries(['myAppointments']); // Refresh lại list lịch khám\r\n            navigation.navigate('Appointments'); // Quay về màn danh sách\r\n        },\r\n        onError: (err: any) => {\r\n            Alert.alert('Lỗi', err?.response?.data?.message || 'Không thể đặt lịch');\r\n        },\r\n    });\r\n\r\n    // --- HANDLERS ---\r\n    const handleDateChange = (event: any, selectedDate?: Date) => {\r\n        setShowDatePicker(Platform.OS === 'ios');\r\n        if (selectedDate) setDate(selectedDate);\r\n    };\r\n\r\n    const handleSubmit = () => {\r\n        if (!selectedBranch) {\r\n            Alert.alert('Thiếu thông tin', 'Vui lòng chọn cơ sở khám');\r\n            return;\r\n        }\r\n        if (!notes.trim()) {\r\n            Alert.alert('Thiếu thông tin', 'Vui lòng nhập triệu chứng/lý do khám');\r\n            return;\r\n        }\r\n\r\n        createMutation.mutate({\r\n            branch_id: selectedBranch,\r\n            doctor_id: selectedDoctor || undefined, // Nếu không chọn bác sĩ thì để undefined\r\n            start_time: date.toISOString(),\r\n            notes: notes,\r\n        });\r\n    };\r\n\r\n    // Helper để lấy tên hiển thị\r\n    const getBranchName = () => branches?.find((b) => b.id === selectedBranch)?.name || 'Chọn chi nhánh';\r\n    const getSpecialtyName = () => specialties?.find((s) => s.id === selectedSpecialty)?.name || 'Tất cả chuyên khoa';\r\n    const getDoctorName = () => doctors?.find((d) => d.id === selectedDoctor)?.user.full_name || 'Chọn bác sĩ (hoặc để trống)';\r\n\r\n    return (\r\n        <KeyboardAvoidingView behavior={Platform.OS === 'ios' ? 'padding' : undefined} style={{ flex: 1 }}>\r\n            <ScrollView style={styles.container} contentContainerStyle={{ paddingBottom: 40 }}>\r\n\r\n                {/* STEP INDICATOR */}\r\n                <View style={styles.stepContainer}>\r\n                    <Text variant=\"titleMedium\" style={{ fontWeight: 'bold', color: theme.colors.primary }}>\r\n                        1. Thông tin khám\r\n                    </Text>\r\n                    <ProgressBar progress={0.5} color={theme.colors.primary} style={{ marginTop: 8, borderRadius: 4 }} />\r\n                </View>\r\n\r\n                <View style={styles.formContainer}>\r\n                    {/* 1. CHỌN CƠ SỞ (Bắt buộc) */}\r\n                    <View style={styles.inputGroup}>\r\n                        <Text style={styles.label}>Cơ sở khám <Text style={{ color: 'red' }}>*</Text></Text>\r\n                        <Menu\r\n                            visible={menuBranchVisible}\r\n                            onDismiss={() => setMenuBranchVisible(false)}\r\n                            anchor={\r\n                                <TouchableRipple onPress={() => setMenuBranchVisible(true)} style={styles.dropdown}>\r\n                                    <View style={styles.dropdownContent}>\r\n                                        <Text style={{ color: selectedBranch ? 'black' : '#777' }}>{getBranchName()}</Text>\r\n                                        <Menu.Icon icon=\"chevron-down\" size={20} />\r\n                                    </View>\r\n                                </TouchableRipple>\r\n                            }\r\n                        >\r\n                            {branches?.map((branch) => (\r\n                                <Menu.Item\r\n                                    key={branch.id}\r\n                                    onPress={() => { setSelectedBranch(branch.id); setMenuBranchVisible(false); }}\r\n                                    title={branch.name}\r\n                                />\r\n                            ))}\r\n                        </Menu>\r\n                    </View>\r\n\r\n                    {/* 2. CHỌN CHUYÊN KHOA (Lọc) */}\r\n                    <View style={styles.inputGroup}>\r\n                        <Text style={styles.label}>Chuyên khoa (Lọc bác sĩ)</Text>\r\n                        <Menu\r\n                            visible={menuSpecialtyVisible}\r\n                            onDismiss={() => setMenuSpecialtyVisible(false)}\r\n                            anchor={\r\n                                <TouchableRipple onPress={() => setMenuSpecialtyVisible(true)} style={styles.dropdown}>\r\n                                    <View style={styles.dropdownContent}>\r\n                                        <Text style={{ color: selectedSpecialty ? 'black' : '#777' }}>{getSpecialtyName()}</Text>\r\n                                        <Menu.Icon icon=\"chevron-down\" size={20} />\r\n                                    </View>\r\n                                </TouchableRipple>\r\n                            }\r\n                        >\r\n                            <Menu.Item onPress={() => { setSelectedSpecialty(''); setMenuSpecialtyVisible(false); }} title=\"Tất cả chuyên khoa\" />\r\n                            {specialties?.map((spec) => (\r\n                                <Menu.Item\r\n                                    key={spec.id}\r\n                                    onPress={() => { setSelectedSpecialty(spec.id); setMenuSpecialtyVisible(false); }}\r\n                                    title={spec.name}\r\n                                />\r\n                            ))}\r\n                        </Menu>\r\n                    </View>\r\n\r\n                    {/* 3. CHỌN BÁC SĨ (Phụ thuộc Cơ sở) */}\r\n                    <View style={styles.inputGroup}>\r\n                        <Text style={styles.label}>Bác sĩ khám</Text>\r\n                        <Menu\r\n                            visible={menuDoctorVisible}\r\n                            onDismiss={() => setMenuDoctorVisible(false)}\r\n                            anchor={\r\n                                <TouchableRipple\r\n                                    onPress={() => !selectedBranch ? Alert.alert('Lưu ý', 'Vui lòng chọn cơ sở trước') : setMenuDoctorVisible(true)}\r\n                                    style={[styles.dropdown, !selectedBranch && { backgroundColor: '#f0f0f0' }]}\r\n                                >\r\n                                    <View style={styles.dropdownContent}>\r\n                                        <Text style={{ color: selectedDoctor ? 'black' : '#777' }}>\r\n                                            {loadingDoctors ? 'Đang tải...' : getDoctorName()}\r\n                                        </Text>\r\n                                        <Menu.Icon icon=\"chevron-down\" size={20} />\r\n                                    </View>\r\n                                </TouchableRipple>\r\n                            }\r\n                        >\r\n                            <Menu.Item onPress={() => { setSelectedDoctor(''); setMenuDoctorVisible(false); }} title=\"Chọn bác sĩ ngẫu nhiên\" />\r\n                            {doctors?.map((doc) => (\r\n                                <Menu.Item\r\n                                    key={doc.id}\r\n                                    onPress={() => { setSelectedDoctor(doc.id); setMenuDoctorVisible(false); }}\r\n                                    title={doc.user.full_name}\r\n                                />\r\n                            ))}\r\n                        </Menu>\r\n                        {!selectedBranch && <HelperText type=\"info\">Vui lòng chọn cơ sở để xem danh sách bác sĩ</HelperText>}\r\n                    </View>\r\n\r\n                    {/* 4. CHỌN NGÀY GIỜ */}\r\n                    <View style={styles.inputGroup}>\r\n                        <Text style={styles.label}>Ngày khám <Text style={{ color: 'red' }}>*</Text></Text>\r\n                        <TouchableRipple onPress={() => setShowDatePicker(true)} style={styles.dropdown}>\r\n                            <View style={styles.dropdownContent}>\r\n                                <Text>{dayjs(date).format('DD/MM/YYYY HH:mm')}</Text>\r\n                                <Menu.Icon icon=\"calendar\" size={20} />\r\n                            </View>\r\n                        </TouchableRipple>\r\n                        {showDatePicker && (\r\n                            <DateTimePicker\r\n                                value={date}\r\n                                mode=\"date\" // Hoặc 'datetime' nếu muốn chọn giờ cụ thể\r\n                                display={Platform.OS === 'ios' ? 'spinner' : 'default'}\r\n                                onChange={handleDateChange}\r\n                                minimumDate={new Date()}\r\n                            />\r\n                        )}\r\n                    </View>\r\n\r\n                    {/* 5. TRIỆU CHỨNG / LÝ DO */}\r\n                    <View style={styles.inputGroup}>\r\n                        <Text style={styles.label}>Triệu chứng / Lý do <Text style={{ color: 'red' }}>*</Text></Text>\r\n                        <TextInput\r\n                            mode=\"outlined\"\r\n                            placeholder=\"Nhập triệu chứng (VD: Đau đầu, sốt...)\"\r\n                            multiline\r\n                            numberOfLines={4}\r\n                            value={notes}\r\n                            onChangeText={setNotes}\r\n                            style={{ backgroundColor: 'white' }}\r\n                        />\r\n                    </View>\r\n\r\n                    {/* BUTTONS */}\r\n                    <View style={styles.buttonRow}>\r\n                        <Button mode=\"outlined\" onPress={() => navigation.goBack()} style={{ flex: 1 }}>\r\n                            Quay lại\r\n                        </Button>\r\n                        <View style={{ width: 12 }} />\r\n                        <Button\r\n                            mode=\"contained\"\r\n                            onPress={handleSubmit}\r\n                            loading={createMutation.isPending}\r\n                            style={{ flex: 1 }}\r\n                        >\r\n                            Tiếp tục\r\n                        </Button>\r\n                    </View>\r\n\r\n                </View>\r\n            </ScrollView>\r\n        </KeyboardAvoidingView>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        backgroundColor: '#fff',\r\n    },\r\n    stepContainer: {\r\n        padding: 16,\r\n        backgroundColor: '#f9f9f9',\r\n        borderBottomWidth: 1,\r\n        borderBottomColor: '#eee',\r\n    },\r\n    formContainer: {\r\n        padding: 16,\r\n    },\r\n    inputGroup: {\r\n        marginBottom: 20,\r\n    },\r\n    label: {\r\n        marginBottom: 8,\r\n        fontWeight: '500',\r\n        color: '#333',\r\n    },\r\n    dropdown: {\r\n        borderWidth: 1,\r\n        borderColor: '#ccc',\r\n        borderRadius: 4,\r\n        padding: 14,\r\n        backgroundColor: 'white',\r\n    },\r\n    dropdownContent: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    buttonRow: {\r\n        flexDirection: 'row',\r\n        marginTop: 10,\r\n        marginBottom: 20,\r\n    },\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}