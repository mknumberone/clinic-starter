{"ast":null,"code":"import { create } from 'zustand';\nimport { io } from 'socket.io-client';\nvar SOCKET_URL = 'http://192.168.100.248:3000';\nexport var useSocketStore = create(function (set, get) {\n  return {\n    socket: null,\n    isConnected: false,\n    connect: function connect(token) {\n      var _get$socket;\n      if ((_get$socket = get().socket) != null && _get$socket.connected) return;\n      console.log('ðŸ”Œ Connecting to Socket:', SOCKET_URL);\n      var newSocket = io(SOCKET_URL, {\n        auth: {\n          token: \"Bearer \" + token\n        },\n        transports: ['websocket'],\n        reconnection: true\n      });\n      newSocket.on('connect', function () {\n        console.log('âœ… Socket Connected:', newSocket.id);\n        set({\n          isConnected: true\n        });\n      });\n      newSocket.on('disconnect', function () {\n        console.log('âŒ Socket Disconnected');\n        set({\n          isConnected: false\n        });\n      });\n      newSocket.on('connect_error', function (err) {\n        console.error('âš ï¸ Socket Connection Error:', err);\n      });\n      set({\n        socket: newSocket\n      });\n    },\n    disconnect: function disconnect() {\n      var socket = get().socket;\n      if (socket) {\n        socket.disconnect();\n        set({\n          socket: null,\n          isConnected: false\n        });\n      }\n    }\n  };\n});","map":{"version":3,"names":["create","io","SOCKET_URL","useSocketStore","set","get","socket","isConnected","connect","token","_get$socket","connected","console","log","newSocket","auth","transports","reconnection","on","id","err","error","disconnect"],"sources":["D:/Student/N4_HK2/Web_App/clinic-starter/mobile/src/stores/socketStore.ts"],"sourcesContent":["// src/stores/socketStore.ts\r\nimport { create } from 'zustand';\r\nimport { io, Socket } from 'socket.io-client';\r\n\r\n// Láº¥y IP tá»« file axios.ts cá»§a báº¡n (cáº¯t bá» /api á»Ÿ cuá»‘i)\r\nconst SOCKET_URL = 'http://192.168.100.248:3000';\r\n\r\ninterface SocketState {\r\n    socket: Socket | null;\r\n    isConnected: boolean;\r\n    connect: (token: string) => void;\r\n    disconnect: () => void;\r\n}\r\n\r\nexport const useSocketStore = create<SocketState>((set, get) => ({\r\n    socket: null,\r\n    isConnected: false,\r\n\r\n    connect: (token: string) => {\r\n        if (get().socket?.connected) return;\r\n\r\n        console.log('ðŸ”Œ Connecting to Socket:', SOCKET_URL);\r\n\r\n        const newSocket = io(SOCKET_URL, {\r\n            auth: { token: `Bearer ${token}` },\r\n            transports: ['websocket'], // Quan trá»ng cho React Native\r\n            reconnection: true,\r\n        });\r\n\r\n        newSocket.on('connect', () => {\r\n            console.log('âœ… Socket Connected:', newSocket.id);\r\n            set({ isConnected: true });\r\n        });\r\n\r\n        newSocket.on('disconnect', () => {\r\n            console.log('âŒ Socket Disconnected');\r\n            set({ isConnected: false });\r\n        });\r\n\r\n        newSocket.on('connect_error', (err) => {\r\n            console.error('âš ï¸ Socket Connection Error:', err);\r\n        });\r\n\r\n        set({ socket: newSocket });\r\n    },\r\n\r\n    disconnect: () => {\r\n        const socket = get().socket;\r\n        if (socket) {\r\n            socket.disconnect();\r\n            set({ socket: null, isConnected: false });\r\n        }\r\n    },\r\n}));"],"mappings":"AACA,SAASA,MAAM,QAAQ,SAAS;AAChC,SAASC,EAAE,QAAgB,kBAAkB;AAG7C,IAAMC,UAAU,GAAG,6BAA6B;AAShD,OAAO,IAAMC,cAAc,GAAGH,MAAM,CAAc,UAACI,GAAG,EAAEC,GAAG;EAAA,OAAM;IAC7DC,MAAM,EAAE,IAAI;IACZC,WAAW,EAAE,KAAK;IAElBC,OAAO,EAAE,SAATA,OAAOA,CAAGC,KAAa,EAAK;MAAA,IAAAC,WAAA;MACxB,KAAAA,WAAA,GAAIL,GAAG,CAAC,CAAC,CAACC,MAAM,aAAZI,WAAA,CAAcC,SAAS,EAAE;MAE7BC,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEX,UAAU,CAAC;MAEnD,IAAMY,SAAS,GAAGb,EAAE,CAACC,UAAU,EAAE;QAC7Ba,IAAI,EAAE;UAAEN,KAAK,cAAYA;QAAQ,CAAC;QAClCO,UAAU,EAAE,CAAC,WAAW,CAAC;QACzBC,YAAY,EAAE;MAClB,CAAC,CAAC;MAEFH,SAAS,CAACI,EAAE,CAAC,SAAS,EAAE,YAAM;QAC1BN,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEC,SAAS,CAACK,EAAE,CAAC;QAChDf,GAAG,CAAC;UAAEG,WAAW,EAAE;QAAK,CAAC,CAAC;MAC9B,CAAC,CAAC;MAEFO,SAAS,CAACI,EAAE,CAAC,YAAY,EAAE,YAAM;QAC7BN,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;QACpCT,GAAG,CAAC;UAAEG,WAAW,EAAE;QAAM,CAAC,CAAC;MAC/B,CAAC,CAAC;MAEFO,SAAS,CAACI,EAAE,CAAC,eAAe,EAAE,UAACE,GAAG,EAAK;QACnCR,OAAO,CAACS,KAAK,CAAC,6BAA6B,EAAED,GAAG,CAAC;MACrD,CAAC,CAAC;MAEFhB,GAAG,CAAC;QAAEE,MAAM,EAAEQ;MAAU,CAAC,CAAC;IAC9B,CAAC;IAEDQ,UAAU,EAAE,SAAZA,UAAUA,CAAA,EAAQ;MACd,IAAMhB,MAAM,GAAGD,GAAG,CAAC,CAAC,CAACC,MAAM;MAC3B,IAAIA,MAAM,EAAE;QACRA,MAAM,CAACgB,UAAU,CAAC,CAAC;QACnBlB,GAAG,CAAC;UAAEE,MAAM,EAAE,IAAI;UAAEC,WAAW,EAAE;QAAM,CAAC,CAAC;MAC7C;IACJ;EACJ,CAAC;AAAA,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}