{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect, createElement } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-paper/lib/module/components/Typography/Text\";\nimport Button from \"react-native-paper/lib/module/components/Button/Button\";\nimport TextInput from \"react-native-paper/lib/module/components/TextInput/TextInput\";\nimport { useTheme } from \"react-native-paper/lib/module/core/theming\";\nimport Menu from \"react-native-paper/lib/module/components/Menu/Menu\";\nimport TouchableRipple from \"react-native-paper/lib/module/components/TouchableRipple/TouchableRipple\";\nimport ActivityIndicator from \"react-native-paper/lib/module/components/ActivityIndicator\";\nimport Banner from \"react-native-paper/lib/module/components/Banner\";\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport DateTimePicker from '@react-native-community/datetimepicker';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport dayjs from 'dayjs';\nimport { useNavigation } from '@react-navigation/native';\nimport { appointmentService } from \"../services/appointment.service\";\nimport { patientService } from \"../services/patient.service\";\nimport { useAuthStore } from \"../stores/authStore\";\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function BookingScreen() {\n  var theme = useTheme();\n  var navigation = useNavigation();\n  var queryClient = useQueryClient();\n  var _useAuthStore = useAuthStore(),\n    user = _useAuthStore.user;\n  var _useQuery = useQuery({\n      queryKey: ['branches'],\n      queryFn: appointmentService.getBranches\n    }),\n    _useQuery$data = _useQuery.data,\n    branches = _useQuery$data === void 0 ? [] : _useQuery$data;\n  var _useQuery2 = useQuery({\n      queryKey: ['specialties'],\n      queryFn: appointmentService.getSpecialties\n    }),\n    _useQuery2$data = _useQuery2.data,\n    specialties = _useQuery2$data === void 0 ? [] : _useQuery2$data;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    selectedBranch = _useState2[0],\n    setSelectedBranch = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    selectedSpecialty = _useState4[0],\n    setSelectedSpecialty = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    selectedDoctor = _useState6[0],\n    setSelectedDoctor = _useState6[1];\n  var _useState7 = useState(new Date()),\n    _useState8 = _slicedToArray(_useState7, 2),\n    date = _useState8[0],\n    setDate = _useState8[1];\n  var _useState9 = useState(false),\n    _useState0 = _slicedToArray(_useState9, 2),\n    showDatePicker = _useState0[0],\n    setShowDatePicker = _useState0[1];\n  var _useState1 = useState(''),\n    _useState10 = _slicedToArray(_useState1, 2),\n    selectedTimeSlot = _useState10[0],\n    setSelectedTimeSlot = _useState10[1];\n  var _useState11 = useState(''),\n    _useState12 = _slicedToArray(_useState11, 2),\n    notes = _useState12[0],\n    setNotes = _useState12[1];\n  var _useState13 = useState({\n      branch: false,\n      specialty: false,\n      doctor: false\n    }),\n    _useState14 = _slicedToArray(_useState13, 2),\n    visibleMenu = _useState14[0],\n    setVisibleMenu = _useState14[1];\n  var _useQuery3 = useQuery({\n      queryKey: ['my-patient-profile', user == null ? void 0 : user.id],\n      queryFn: function () {\n        var _queryFn = _asyncToGenerator(function* () {\n          var _patient, _res$data;\n          if (user != null && (_patient = user.patient) != null && _patient.id) return user.patient;\n          var res = yield patientService.getPatients({\n            limit: 1000\n          });\n          var found = (_res$data = res.data) == null ? void 0 : _res$data.find(function (p) {\n            var _p$user;\n            return p.user_id === (user == null ? void 0 : user.id) || ((_p$user = p.user) == null ? void 0 : _p$user.id) === (user == null ? void 0 : user.id);\n          });\n          if (!found) throw new Error('NOT_FOUND');\n          return found;\n        });\n        function queryFn() {\n          return _queryFn.apply(this, arguments);\n        }\n        return queryFn;\n      }(),\n      enabled: !!(user != null && user.id),\n      retry: 1\n    }),\n    myPatientProfile = _useQuery3.data,\n    isLoadingProfile = _useQuery3.isLoading,\n    isProfileError = _useQuery3.isError;\n  var _useQuery4 = useQuery({\n      queryKey: ['doctors', selectedBranch, selectedSpecialty],\n      queryFn: function queryFn() {\n        return appointmentService.getDoctors(selectedBranch, selectedSpecialty);\n      },\n      enabled: !!selectedSpecialty\n    }),\n    _useQuery4$data = _useQuery4.data,\n    doctors = _useQuery4$data === void 0 ? [] : _useQuery4$data;\n  var formattedDate = dayjs(date).format('YYYY-MM-DD');\n  var _useQuery5 = useQuery({\n      queryKey: ['slots', selectedBranch, selectedSpecialty, selectedDoctor, formattedDate],\n      queryFn: function queryFn() {\n        return appointmentService.getAvailableSlots(selectedBranch, selectedSpecialty, formattedDate, selectedDoctor);\n      },\n      enabled: !!selectedBranch && !!selectedSpecialty,\n      retry: false\n    }),\n    _useQuery5$data = _useQuery5.data,\n    availableSlots = _useQuery5$data === void 0 ? [] : _useQuery5$data,\n    loadingSlots = _useQuery5.isFetching;\n  useEffect(function () {\n    setSelectedSpecialty('');\n    setSelectedDoctor('');\n    setSelectedTimeSlot('');\n  }, [selectedBranch]);\n  useEffect(function () {\n    setSelectedDoctor('');\n    setSelectedTimeSlot('');\n  }, [selectedSpecialty]);\n  useEffect(function () {\n    setSelectedTimeSlot('');\n  }, [selectedDoctor, formattedDate]);\n  var createMutation = useMutation({\n    mutationFn: appointmentService.createAppointment,\n    onSuccess: function onSuccess(response) {\n      var message = (response == null ? void 0 : response.message) || 'Đặt lịch thành công!';\n      Alert.alert('Thông báo', message, [{\n        text: 'OK',\n        onPress: function onPress() {\n          queryClient.invalidateQueries(['myAppointments']);\n          navigation.navigate('Appointments');\n        }\n      }]);\n    },\n    onError: function onError(err) {\n      var _err$response, _err$response$data;\n      var msg = (err == null ? void 0 : (_err$response = err.response) == null ? void 0 : (_err$response$data = _err$response.data) == null ? void 0 : _err$response$data.message) || 'Đặt lịch thất bại';\n      Alert.alert('Lỗi', Array.isArray(msg) ? msg[0] : msg);\n    }\n  });\n  var handleSubmit = function handleSubmit() {\n    if (!selectedBranch || !selectedSpecialty || !selectedTimeSlot) return Alert.alert('Thiếu thông tin', 'Vui lòng chọn đầy đủ thông tin');\n    var _selectedTimeSlot$spl = selectedTimeSlot.split(':'),\n      _selectedTimeSlot$spl2 = _slicedToArray(_selectedTimeSlot$spl, 2),\n      h = _selectedTimeSlot$spl2[0],\n      m = _selectedTimeSlot$spl2[1];\n    var startDateTime = dayjs(date).hour(Number(h)).minute(Number(m)).second(0);\n    var endDateTime = startDateTime.add(30, 'minute');\n    createMutation.mutate({\n      patient_id: myPatientProfile.id,\n      branch_id: selectedBranch,\n      doctor_assigned_id: selectedDoctor || undefined,\n      start_time: startDateTime.toISOString(),\n      end_time: endDateTime.toISOString(),\n      notes: notes,\n      appointment_type: 'checkup'\n    });\n  };\n  var getBranchName = function getBranchName() {\n    var _branches$find;\n    return Array.isArray(branches) ? ((_branches$find = branches.find(function (b) {\n      return b.id === selectedBranch;\n    })) == null ? void 0 : _branches$find.name) || 'Chọn cơ sở' : 'Chọn cơ sở';\n  };\n  var getSpecialtyName = function getSpecialtyName() {\n    var _specialties$find;\n    return Array.isArray(specialties) ? ((_specialties$find = specialties.find(function (s) {\n      return s.id === selectedSpecialty;\n    })) == null ? void 0 : _specialties$find.name) || 'Tất cả chuyên khoa' : 'Tất cả chuyên khoa';\n  };\n  var getDoctorName = function getDoctorName() {\n    var _doctors$find, _doctors$find$user;\n    return Array.isArray(doctors) ? ((_doctors$find = doctors.find(function (d) {\n      return d.id === selectedDoctor;\n    })) == null ? void 0 : (_doctors$find$user = _doctors$find.user) == null ? void 0 : _doctors$find$user.full_name) || 'Bác sĩ bất kỳ' : 'Bác sĩ bất kỳ';\n  };\n  if (isLoadingProfile) return _jsx(View, {\n    style: styles.center,\n    children: _jsx(ActivityIndicator, {})\n  });\n  if (isProfileError) return _jsx(View, {\n    style: {\n      padding: 16\n    },\n    children: _jsx(Banner, {\n      visible: true,\n      actions: [{\n        label: 'Cập nhật',\n        onPress: function onPress() {\n          return navigation.navigate('Profile');\n        }\n      }],\n      children: \"Ch\\u01B0a c\\xF3 h\\u1ED3 s\\u01A1 b\\u1EC7nh nh\\xE2n.\"\n    })\n  });\n  return _jsx(KeyboardAvoidingView, {\n    behavior: Platform.OS === 'ios' ? 'padding' : undefined,\n    style: {\n      flex: 1\n    },\n    children: _jsx(ScrollView, {\n      style: styles.container,\n      children: _jsxs(View, {\n        style: styles.formContainer,\n        children: [_jsx(Text, {\n          style: styles.headerTitle,\n          children: \"\\u0110\\u1EB7t l\\u1ECBch kh\\xE1m b\\u1EC7nh\"\n        }), _jsxs(View, {\n          style: styles.group,\n          children: [_jsx(Text, {\n            style: styles.label,\n            children: \"C\\u01A1 s\\u1EDF kh\\xE1m *\"\n          }), _jsx(Menu, {\n            visible: visibleMenu.branch,\n            onDismiss: function onDismiss() {\n              return setVisibleMenu(_objectSpread(_objectSpread({}, visibleMenu), {}, {\n                branch: false\n              }));\n            },\n            anchor: _jsx(TouchableRipple, {\n              onPress: function onPress() {\n                return setVisibleMenu(_objectSpread(_objectSpread({}, visibleMenu), {}, {\n                  branch: true\n                }));\n              },\n              style: styles.dropdown,\n              children: _jsxs(View, {\n                style: styles.row,\n                children: [_jsx(Text, {\n                  children: getBranchName()\n                }), _jsx(MaterialCommunityIcons, {\n                  name: \"chevron-down\",\n                  size: 24,\n                  color: \"#777\"\n                })]\n              })\n            }),\n            children: Array.isArray(branches) && branches.map(function (b) {\n              return _jsx(Menu.Item, {\n                onPress: function onPress() {\n                  setSelectedBranch(b.id);\n                  setVisibleMenu(_objectSpread(_objectSpread({}, visibleMenu), {}, {\n                    branch: false\n                  }));\n                },\n                title: b.name\n              }, b.id);\n            })\n          })]\n        }), _jsxs(View, {\n          style: styles.group,\n          children: [_jsx(Text, {\n            style: styles.label,\n            children: \"Chuy\\xEAn khoa *\"\n          }), _jsxs(Menu, {\n            visible: visibleMenu.specialty,\n            onDismiss: function onDismiss() {\n              return setVisibleMenu(_objectSpread(_objectSpread({}, visibleMenu), {}, {\n                specialty: false\n              }));\n            },\n            anchor: _jsx(TouchableRipple, {\n              onPress: function onPress() {\n                return !selectedBranch ? Alert.alert('Lưu ý', 'Chọn cơ sở trước') : setVisibleMenu(_objectSpread(_objectSpread({}, visibleMenu), {}, {\n                  specialty: true\n                }));\n              },\n              style: [styles.dropdown, !selectedBranch && styles.disabled],\n              children: _jsxs(View, {\n                style: styles.row,\n                children: [_jsx(Text, {\n                  children: getSpecialtyName()\n                }), _jsx(MaterialCommunityIcons, {\n                  name: \"chevron-down\",\n                  size: 24,\n                  color: \"#777\"\n                })]\n              })\n            }),\n            children: [specialties.length === 0 && _jsx(Menu.Item, {\n              title: \"Kh\\xF4ng t\\u1EA3i \\u0111\\u01B0\\u1EE3c danh s\\xE1ch\",\n              disabled: true\n            }), Array.isArray(specialties) && specialties.map(function (s) {\n              return _jsx(Menu.Item, {\n                onPress: function onPress() {\n                  setSelectedSpecialty(s.id);\n                  setVisibleMenu(_objectSpread(_objectSpread({}, visibleMenu), {}, {\n                    specialty: false\n                  }));\n                },\n                title: s.name\n              }, s.id);\n            })]\n          })]\n        }), _jsxs(View, {\n          style: styles.group,\n          children: [_jsx(Text, {\n            style: styles.label,\n            children: \"B\\xE1c s\\u0129\"\n          }), _jsxs(Menu, {\n            visible: visibleMenu.doctor,\n            onDismiss: function onDismiss() {\n              return setVisibleMenu(_objectSpread(_objectSpread({}, visibleMenu), {}, {\n                doctor: false\n              }));\n            },\n            anchor: _jsx(TouchableRipple, {\n              onPress: function onPress() {\n                return !selectedSpecialty ? Alert.alert('Lưu ý', 'Chọn chuyên khoa trước') : setVisibleMenu(_objectSpread(_objectSpread({}, visibleMenu), {}, {\n                  doctor: true\n                }));\n              },\n              style: styles.dropdown,\n              children: _jsxs(View, {\n                style: styles.row,\n                children: [_jsx(Text, {\n                  children: getDoctorName()\n                }), _jsx(MaterialCommunityIcons, {\n                  name: \"chevron-down\",\n                  size: 24,\n                  color: \"#777\"\n                })]\n              })\n            }),\n            children: [_jsx(Menu.Item, {\n              onPress: function onPress() {\n                setSelectedDoctor('');\n                setVisibleMenu(_objectSpread(_objectSpread({}, visibleMenu), {}, {\n                  doctor: false\n                }));\n              },\n              title: \"B\\xE1c s\\u0129 b\\u1EA5t k\\u1EF3\"\n            }), Array.isArray(doctors) && doctors.map(function (d) {\n              var _d$user;\n              return _jsx(Menu.Item, {\n                onPress: function onPress() {\n                  setSelectedDoctor(d.id);\n                  setVisibleMenu(_objectSpread(_objectSpread({}, visibleMenu), {}, {\n                    doctor: false\n                  }));\n                },\n                title: (_d$user = d.user) == null ? void 0 : _d$user.full_name\n              }, d.id);\n            })]\n          })]\n        }), _jsxs(View, {\n          style: styles.group,\n          children: [_jsx(Text, {\n            style: styles.label,\n            children: \"Ng\\xE0y kh\\xE1m *\"\n          }), Platform.OS === 'web' ? _jsx(View, {\n            style: styles.dropdown,\n            children: createElement('input', {\n              type: 'date',\n              value: dayjs(date).format('YYYY-MM-DD'),\n              style: {\n                border: 'none',\n                outline: 'none',\n                width: '100%',\n                fontSize: 16,\n                backgroundColor: 'transparent'\n              },\n              onChange: function onChange(e) {\n                return setDate(new Date(e.target.value));\n              }\n            })\n          }) : _jsxs(_Fragment, {\n            children: [_jsx(TouchableRipple, {\n              onPress: function onPress() {\n                return setShowDatePicker(true);\n              },\n              style: styles.dropdown,\n              children: _jsxs(View, {\n                style: styles.row,\n                children: [_jsx(Text, {\n                  children: dayjs(date).format('DD/MM/YYYY')\n                }), _jsx(MaterialCommunityIcons, {\n                  name: \"calendar\",\n                  size: 24,\n                  color: \"#777\"\n                })]\n              })\n            }), showDatePicker && _jsx(DateTimePicker, {\n              value: date,\n              mode: \"date\",\n              display: \"default\",\n              onChange: function onChange(e, d) {\n                setShowDatePicker(false);\n                if (d) setDate(d);\n              },\n              minimumDate: new Date()\n            })]\n          })]\n        }), selectedBranch && selectedSpecialty && _jsxs(View, {\n          style: styles.group,\n          children: [_jsx(Text, {\n            style: styles.label,\n            children: \"Gi\\u1EDD kh\\xE1m *\"\n          }), loadingSlots ? _jsx(ActivityIndicator, {}) : _jsx(View, {\n            style: styles.slots,\n            children: availableSlots.map(function (slot) {\n              return _jsx(TouchableOpacity, {\n                onPress: function onPress() {\n                  return setSelectedTimeSlot(slot);\n                },\n                style: [styles.slot, selectedTimeSlot === slot && styles.slotActive],\n                children: _jsx(Text, {\n                  style: {\n                    color: selectedTimeSlot === slot ? 'white' : '#333'\n                  },\n                  children: slot\n                })\n              }, slot);\n            })\n          })]\n        }), _jsx(TextInput, {\n          mode: \"outlined\",\n          placeholder: \"Tri\\u1EC7u ch\\u1EE9ng...\",\n          value: notes,\n          onChangeText: setNotes,\n          multiline: true,\n          style: {\n            marginBottom: 20,\n            backgroundColor: 'white'\n          }\n        }), _jsx(Button, {\n          mode: \"contained\",\n          onPress: handleSubmit,\n          loading: createMutation.isPending,\n          disabled: !selectedTimeSlot,\n          children: \"X\\xE1c nh\\u1EADn\"\n        })]\n      })\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff'\n  },\n  center: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  formContainer: {\n    padding: 16\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginBottom: 20,\n    color: '#1a237e'\n  },\n  group: {\n    marginBottom: 16\n  },\n  label: {\n    marginBottom: 6,\n    fontWeight: '500'\n  },\n  dropdown: {\n    borderWidth: 1,\n    borderColor: '#ddd',\n    borderRadius: 8,\n    padding: 12,\n    backgroundColor: 'white'\n  },\n  disabled: {\n    backgroundColor: '#f5f5f5'\n  },\n  row: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  },\n  slots: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 10\n  },\n  slot: {\n    width: '23%',\n    padding: 10,\n    borderWidth: 1,\n    borderColor: '#ddd',\n    borderRadius: 6,\n    alignItems: 'center'\n  },\n  slotActive: {\n    backgroundColor: '#2196F3',\n    borderColor: '#2196F3'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","createElement","View","StyleSheet","ScrollView","Platform","KeyboardAvoidingView","Alert","TouchableOpacity","Text","Button","TextInput","useTheme","Menu","TouchableRipple","ActivityIndicator","Banner","useQuery","useMutation","useQueryClient","DateTimePicker","MaterialCommunityIcons","dayjs","useNavigation","appointmentService","patientService","useAuthStore","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BookingScreen","theme","navigation","queryClient","_useAuthStore","user","_useQuery","queryKey","queryFn","getBranches","_useQuery$data","data","branches","_useQuery2","getSpecialties","_useQuery2$data","specialties","_useState","_useState2","_slicedToArray","selectedBranch","setSelectedBranch","_useState3","_useState4","selectedSpecialty","setSelectedSpecialty","_useState5","_useState6","selectedDoctor","setSelectedDoctor","_useState7","Date","_useState8","date","setDate","_useState9","_useState0","showDatePicker","setShowDatePicker","_useState1","_useState10","selectedTimeSlot","setSelectedTimeSlot","_useState11","_useState12","notes","setNotes","_useState13","branch","specialty","doctor","_useState14","visibleMenu","setVisibleMenu","_useQuery3","id","_queryFn","_asyncToGenerator","_patient","_res$data","patient","res","getPatients","limit","found","find","p","_p$user","user_id","Error","apply","arguments","enabled","retry","myPatientProfile","isLoadingProfile","isLoading","isProfileError","isError","_useQuery4","getDoctors","_useQuery4$data","doctors","formattedDate","format","_useQuery5","getAvailableSlots","_useQuery5$data","availableSlots","loadingSlots","isFetching","createMutation","mutationFn","createAppointment","onSuccess","response","message","alert","text","onPress","invalidateQueries","navigate","onError","err","_err$response","_err$response$data","msg","Array","isArray","handleSubmit","_selectedTimeSlot$spl","split","_selectedTimeSlot$spl2","h","m","startDateTime","hour","Number","minute","second","endDateTime","add","mutate","patient_id","branch_id","doctor_assigned_id","undefined","start_time","toISOString","end_time","appointment_type","getBranchName","_branches$find","b","name","getSpecialtyName","_specialties$find","s","getDoctorName","_doctors$find","_doctors$find$user","d","full_name","style","styles","center","children","padding","visible","actions","label","behavior","OS","flex","container","formContainer","headerTitle","group","onDismiss","_objectSpread","anchor","dropdown","row","size","color","map","Item","title","disabled","length","_d$user","type","value","border","outline","width","fontSize","backgroundColor","onChange","e","target","mode","display","minimumDate","slots","slot","slotActive","placeholder","onChangeText","multiline","marginBottom","loading","isPending","create","justifyContent","alignItems","fontWeight","borderWidth","borderColor","borderRadius","flexDirection","flexWrap","gap"],"sources":["D:/Student/N4_HK2/Web_App/clinic-starter/mobile/src/screens/BookingScreen.tsx"],"sourcesContent":["import React, { useState, useEffect, createElement } from 'react';\r\nimport { View, StyleSheet, ScrollView, Platform, KeyboardAvoidingView, Alert, TouchableOpacity } from 'react-native';\r\nimport { Text, Button, TextInput, useTheme, Menu, TouchableRipple, ActivityIndicator, Banner, ProgressBar } from 'react-native-paper';\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\n// Fix lỗi DateTimePicker\r\nimport DateTimePicker from '@react-native-community/datetimepicker';\r\n// Fix lỗi Icon: Dùng từ Expo Vector Icons\r\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\r\nimport dayjs from 'dayjs';\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\nimport { appointmentService } from '../services/appointment.service';\r\nimport { patientService } from '../services/patient.service';\r\nimport { useAuthStore } from '../stores/authStore';\r\n\r\nexport default function BookingScreen() {\r\n    const theme = useTheme();\r\n    const navigation = useNavigation<any>();\r\n    const queryClient = useQueryClient();\r\n    const { user } = useAuthStore();\r\n\r\n    // --- 1. DATA FETCHING (QUAN TRỌNG) ---\r\n    // Thêm fallback [] để tránh lỗi map\r\n    const { data: branches = [] } = useQuery({ queryKey: ['branches'], queryFn: appointmentService.getBranches });\r\n    const { data: specialties = [] } = useQuery({ queryKey: ['specialties'], queryFn: appointmentService.getSpecialties });\r\n\r\n    const [selectedBranch, setSelectedBranch] = useState<string>('');\r\n    const [selectedSpecialty, setSelectedSpecialty] = useState<string>('');\r\n    const [selectedDoctor, setSelectedDoctor] = useState<string>('');\r\n    const [date, setDate] = useState(new Date());\r\n    const [showDatePicker, setShowDatePicker] = useState(false);\r\n    const [selectedTimeSlot, setSelectedTimeSlot] = useState<string>('');\r\n    const [notes, setNotes] = useState('');\r\n    const [visibleMenu, setVisibleMenu] = useState({ branch: false, specialty: false, doctor: false });\r\n\r\n    // Tìm hồ sơ bệnh nhân\r\n    const { data: myPatientProfile, isLoading: isLoadingProfile, isError: isProfileError } = useQuery({\r\n        queryKey: ['my-patient-profile', user?.id],\r\n        queryFn: async () => {\r\n            if ((user as any)?.patient?.id) return (user as any).patient;\r\n            const res = await patientService.getPatients({ limit: 1000 });\r\n            const found = res.data?.find((p: any) => p.user_id === user?.id || p.user?.id === user?.id);\r\n            if (!found) throw new Error('NOT_FOUND');\r\n            return found;\r\n        },\r\n        enabled: !!user?.id,\r\n        retry: 1\r\n    });\r\n\r\n    // Lấy bác sĩ\r\n    const { data: doctors = [] } = useQuery({\r\n        queryKey: ['doctors', selectedBranch, selectedSpecialty],\r\n        queryFn: () => appointmentService.getDoctors(selectedBranch, selectedSpecialty),\r\n        enabled: !!selectedSpecialty,\r\n    });\r\n\r\n    // Lấy Slot\r\n    const formattedDate = dayjs(date).format('YYYY-MM-DD');\r\n    const { data: availableSlots = [], isFetching: loadingSlots } = useQuery({\r\n        queryKey: ['slots', selectedBranch, selectedSpecialty, selectedDoctor, formattedDate],\r\n        queryFn: () => appointmentService.getAvailableSlots(selectedBranch, selectedSpecialty, formattedDate, selectedDoctor),\r\n        enabled: !!selectedBranch && !!selectedSpecialty,\r\n        retry: false\r\n    });\r\n\r\n    // Reset logic\r\n    useEffect(() => { setSelectedSpecialty(''); setSelectedDoctor(''); setSelectedTimeSlot(''); }, [selectedBranch]);\r\n    useEffect(() => { setSelectedDoctor(''); setSelectedTimeSlot(''); }, [selectedSpecialty]);\r\n    useEffect(() => { setSelectedTimeSlot(''); }, [selectedDoctor, formattedDate]);\r\n\r\n    // --- 5. SUBMIT ---\r\n    const createMutation = useMutation({\r\n        mutationFn: appointmentService.createAppointment,\r\n\r\n        // [SỬA ĐOẠN NÀY]: Nhận response từ server để lấy message\r\n        onSuccess: (response: any) => {\r\n            // Lấy thông báo từ Backend (quan trọng cho trường hợp đặt lịch chờ)\r\n            const message = response?.message || 'Đặt lịch thành công!';\r\n\r\n            Alert.alert(\r\n                'Thông báo',\r\n                message,\r\n                [\r\n                    {\r\n                        text: 'OK',\r\n                        onPress: () => {\r\n                            queryClient.invalidateQueries(['myAppointments']);\r\n                            navigation.navigate('Appointments');\r\n                        }\r\n                    }\r\n                ]\r\n            );\r\n        },\r\n\r\n        onError: (err: any) => {\r\n            const msg = err?.response?.data?.message || 'Đặt lịch thất bại';\r\n            // Nếu lỗi là mảng (validation), lấy phần tử đầu tiên\r\n            Alert.alert('Lỗi', Array.isArray(msg) ? msg[0] : msg);\r\n        },\r\n    });\r\n    const handleSubmit = () => {\r\n        if (!selectedBranch || !selectedSpecialty || !selectedTimeSlot) return Alert.alert('Thiếu thông tin', 'Vui lòng chọn đầy đủ thông tin');\r\n\r\n        const [h, m] = selectedTimeSlot.split(':');\r\n        const startDateTime = dayjs(date).hour(Number(h)).minute(Number(m)).second(0);\r\n        const endDateTime = startDateTime.add(30, 'minute');\r\n\r\n        createMutation.mutate({\r\n            patient_id: myPatientProfile.id,\r\n            branch_id: selectedBranch,\r\n            doctor_assigned_id: selectedDoctor || undefined,\r\n            start_time: startDateTime.toISOString(),\r\n            end_time: endDateTime.toISOString(),\r\n            notes: notes,\r\n            appointment_type: 'checkup'\r\n        });\r\n    };\r\n\r\n    const getBranchName = () => Array.isArray(branches) ? branches.find(b => b.id === selectedBranch)?.name || 'Chọn cơ sở' : 'Chọn cơ sở';\r\n    const getSpecialtyName = () => Array.isArray(specialties) ? specialties.find(s => s.id === selectedSpecialty)?.name || 'Tất cả chuyên khoa' : 'Tất cả chuyên khoa';\r\n    const getDoctorName = () => Array.isArray(doctors) ? doctors.find(d => d.id === selectedDoctor)?.user?.full_name || 'Bác sĩ bất kỳ' : 'Bác sĩ bất kỳ';\r\n\r\n    if (isLoadingProfile) return <View style={styles.center}><ActivityIndicator /></View>;\r\n    if (isProfileError) return <View style={{ padding: 16 }}><Banner visible actions={[{ label: 'Cập nhật', onPress: () => navigation.navigate('Profile') }]}>Chưa có hồ sơ bệnh nhân.</Banner></View>;\r\n\r\n    return (\r\n        <KeyboardAvoidingView behavior={Platform.OS === 'ios' ? 'padding' : undefined} style={{ flex: 1 }}>\r\n            <ScrollView style={styles.container}>\r\n                <View style={styles.formContainer}>\r\n                    <Text style={styles.headerTitle}>Đặt lịch khám bệnh</Text>\r\n\r\n                    {/* CƠ SỞ */}\r\n                    <View style={styles.group}>\r\n                        <Text style={styles.label}>Cơ sở khám *</Text>\r\n                        <Menu\r\n                            visible={visibleMenu.branch}\r\n                            onDismiss={() => setVisibleMenu({ ...visibleMenu, branch: false })}\r\n                            anchor={\r\n                                <TouchableRipple onPress={() => setVisibleMenu({ ...visibleMenu, branch: true })} style={styles.dropdown}>\r\n                                    <View style={styles.row}>\r\n                                        <Text>{getBranchName()}</Text>\r\n                                        <MaterialCommunityIcons name=\"chevron-down\" size={24} color=\"#777\" />\r\n                                    </View>\r\n                                </TouchableRipple>\r\n                            }\r\n                        >\r\n                            {Array.isArray(branches) && branches.map(b => (\r\n                                <Menu.Item key={b.id} onPress={() => { setSelectedBranch(b.id); setVisibleMenu({ ...visibleMenu, branch: false }); }} title={b.name} />\r\n                            ))}\r\n                        </Menu>\r\n                    </View>\r\n\r\n                    {/* CHUYÊN KHOA */}\r\n                    <View style={styles.group}>\r\n                        <Text style={styles.label}>Chuyên khoa *</Text>\r\n                        <Menu\r\n                            visible={visibleMenu.specialty}\r\n                            onDismiss={() => setVisibleMenu({ ...visibleMenu, specialty: false })}\r\n                            anchor={\r\n                                <TouchableRipple\r\n                                    onPress={() => !selectedBranch ? Alert.alert('Lưu ý', 'Chọn cơ sở trước') : setVisibleMenu({ ...visibleMenu, specialty: true })}\r\n                                    style={[styles.dropdown, !selectedBranch && styles.disabled]}\r\n                                >\r\n                                    <View style={styles.row}>\r\n                                        <Text>{getSpecialtyName()}</Text>\r\n                                        <MaterialCommunityIcons name=\"chevron-down\" size={24} color=\"#777\" />\r\n                                    </View>\r\n                                </TouchableRipple>\r\n                            }\r\n                        >\r\n                            {/* Kiểm tra độ dài mảng để debug */}\r\n                            {specialties.length === 0 && <Menu.Item title=\"Không tải được danh sách\" disabled />}\r\n\r\n                            {Array.isArray(specialties) && specialties.map(s => (\r\n                                <Menu.Item key={s.id} onPress={() => { setSelectedSpecialty(s.id); setVisibleMenu({ ...visibleMenu, specialty: false }); }} title={s.name} />\r\n                            ))}\r\n                        </Menu>\r\n                    </View>\r\n\r\n                    {/* BÁC SĨ */}\r\n                    <View style={styles.group}>\r\n                        <Text style={styles.label}>Bác sĩ</Text>\r\n                        <Menu\r\n                            visible={visibleMenu.doctor}\r\n                            onDismiss={() => setVisibleMenu({ ...visibleMenu, doctor: false })}\r\n                            anchor={\r\n                                <TouchableRipple onPress={() => !selectedSpecialty ? Alert.alert('Lưu ý', 'Chọn chuyên khoa trước') : setVisibleMenu({ ...visibleMenu, doctor: true })} style={styles.dropdown}>\r\n                                    <View style={styles.row}>\r\n                                        <Text>{getDoctorName()}</Text>\r\n                                        <MaterialCommunityIcons name=\"chevron-down\" size={24} color=\"#777\" />\r\n                                    </View>\r\n                                </TouchableRipple>\r\n                            }\r\n                        >\r\n                            <Menu.Item onPress={() => { setSelectedDoctor(''); setVisibleMenu({ ...visibleMenu, doctor: false }); }} title=\"Bác sĩ bất kỳ\" />\r\n                            {Array.isArray(doctors) && doctors.map(d => (\r\n                                <Menu.Item key={d.id} onPress={() => { setSelectedDoctor(d.id); setVisibleMenu({ ...visibleMenu, doctor: false }); }} title={d.user?.full_name} />\r\n                            ))}\r\n                        </Menu>\r\n                    </View>\r\n\r\n                    {/* NGÀY KHÁM */}\r\n                    <View style={styles.group}>\r\n                        <Text style={styles.label}>Ngày khám *</Text>\r\n                        {Platform.OS === 'web' ? (\r\n                            <View style={styles.dropdown}>\r\n                                {createElement('input', {\r\n                                    type: 'date',\r\n                                    value: dayjs(date).format('YYYY-MM-DD'),\r\n                                    style: { border: 'none', outline: 'none', width: '100%', fontSize: 16, backgroundColor: 'transparent' },\r\n                                    onChange: (e: any) => setDate(new Date(e.target.value))\r\n                                })}\r\n                            </View>\r\n                        ) : (\r\n                            <>\r\n                                <TouchableRipple onPress={() => setShowDatePicker(true)} style={styles.dropdown}>\r\n                                    <View style={styles.row}>\r\n                                        <Text>{dayjs(date).format('DD/MM/YYYY')}</Text>\r\n                                        <MaterialCommunityIcons name=\"calendar\" size={24} color=\"#777\" />\r\n                                    </View>\r\n                                </TouchableRipple>\r\n                                {showDatePicker && (\r\n                                    <DateTimePicker value={date} mode=\"date\" display=\"default\" onChange={(e, d) => { setShowDatePicker(false); if (d) setDate(d); }} minimumDate={new Date()} />\r\n                                )}\r\n                            </>\r\n                        )}\r\n                    </View>\r\n\r\n                    {/* SLOTS */}\r\n                    {selectedBranch && selectedSpecialty && (\r\n                        <View style={styles.group}>\r\n                            <Text style={styles.label}>Giờ khám *</Text>\r\n                            {loadingSlots ? <ActivityIndicator /> : (\r\n                                <View style={styles.slots}>\r\n                                    {availableSlots.map((slot: string) => (\r\n                                        <TouchableOpacity key={slot} onPress={() => setSelectedTimeSlot(slot)} style={[styles.slot, selectedTimeSlot === slot && styles.slotActive]}>\r\n                                            <Text style={{ color: selectedTimeSlot === slot ? 'white' : '#333' }}>{slot}</Text>\r\n                                        </TouchableOpacity>\r\n                                    ))}\r\n                                </View>\r\n                            )}\r\n                        </View>\r\n                    )}\r\n\r\n                    <TextInput mode=\"outlined\" placeholder=\"Triệu chứng...\" value={notes} onChangeText={setNotes} multiline style={{ marginBottom: 20, backgroundColor: 'white' }} />\r\n\r\n                    <Button mode=\"contained\" onPress={handleSubmit} loading={createMutation.isPending} disabled={!selectedTimeSlot}>Xác nhận</Button>\r\n                </View>\r\n            </ScrollView>\r\n        </KeyboardAvoidingView>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: { flex: 1, backgroundColor: '#fff' },\r\n    center: { flex: 1, justifyContent: 'center', alignItems: 'center' },\r\n    formContainer: { padding: 16 },\r\n    headerTitle: { fontSize: 20, fontWeight: 'bold', marginBottom: 20, color: '#1a237e' },\r\n    group: { marginBottom: 16 },\r\n    label: { marginBottom: 6, fontWeight: '500' },\r\n    dropdown: { borderWidth: 1, borderColor: '#ddd', borderRadius: 8, padding: 12, backgroundColor: 'white' },\r\n    disabled: { backgroundColor: '#f5f5f5' },\r\n    row: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' },\r\n    slots: { flexDirection: 'row', flexWrap: 'wrap', gap: 10 },\r\n    slot: { width: '23%', padding: 10, borderWidth: 1, borderColor: '#ddd', borderRadius: 6, alignItems: 'center' },\r\n    slotActive: { backgroundColor: '#2196F3', borderColor: '#2196F3' }\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}