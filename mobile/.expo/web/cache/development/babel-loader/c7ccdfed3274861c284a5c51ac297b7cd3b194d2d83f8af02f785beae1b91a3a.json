{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState, useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TextInput from \"react-native-paper/lib/module/components/TextInput/TextInput\";\nimport IconButton from \"react-native-paper/lib/module/components/IconButton/IconButton\";\nimport Text from \"react-native-paper/lib/module/components/Typography/Text\";\nimport ActivityIndicator from \"react-native-paper/lib/module/components/ActivityIndicator\";\nimport { useTheme } from \"react-native-paper/lib/module/core/theming\";\nimport * as Avatar from \"react-native-paper/lib/module/components/Avatar/Avatar\";\nimport { useSocketStore } from \"../stores/socketStore\";\nimport { useAuthStore } from \"../stores/authStore\";\nimport { chatService } from \"../services/chat.service\";\nimport * as ImagePicker from 'expo-image-picker';\nimport dayjs from 'dayjs';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar BASE_URL = 'http://192.168.100.248:3000';\nexport default function ChatScreen(_ref) {\n  var navigation = _ref.navigation;\n  var theme = useTheme();\n  var _useSocketStore = useSocketStore(),\n    socket = _useSocketStore.socket;\n  var _useAuthStore = useAuthStore(),\n    user = _useAuthStore.user;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    messages = _useState2[0],\n    setMessages = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    inputText = _useState4[0],\n    setInputText = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    conversationId = _useState6[0],\n    setConversationId = _useState6[1];\n  var _useState7 = useState(true),\n    _useState8 = _slicedToArray(_useState7, 2),\n    isLoading = _useState8[0],\n    setIsLoading = _useState8[1];\n  var _useState9 = useState(false),\n    _useState0 = _slicedToArray(_useState9, 2),\n    isSending = _useState0[0],\n    setIsSending = _useState0[1];\n  var flatListRef = useRef(null);\n  useEffect(function () {\n    var initChat = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          var conv = yield chatService.getMyConversation();\n          if (conv) {\n            setConversationId(conv.id);\n            socket == null ? void 0 : socket.emit('joinRoom', conv.id);\n            var msgs = yield chatService.getMessages(conv.id);\n            setMessages(msgs);\n          }\n        } catch (error) {\n          console.error(\"Lỗi init chat:\", error);\n        } finally {\n          setIsLoading(false);\n        }\n      });\n      return function initChat() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    if (socket && user) {\n      initChat();\n    }\n  }, [socket, user]);\n  useEffect(function () {\n    if (!socket) return;\n    var handleNewMessage = function handleNewMessage(msg) {\n      if (msg.sender_id === (user == null ? void 0 : user.id)) return;\n      setMessages(function (prev) {\n        return [].concat(_toConsumableArray(prev), [msg]);\n      });\n      setTimeout(function () {\n        var _flatListRef$current;\n        return (_flatListRef$current = flatListRef.current) == null ? void 0 : _flatListRef$current.scrollToEnd({\n          animated: true\n        });\n      }, 100);\n    };\n    socket.on('newMessage', handleNewMessage);\n    return function () {\n      socket.off('newMessage', handleNewMessage);\n    };\n  }, [socket, user]);\n  var pickImage = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      var _yield$ImagePicker$re = yield ImagePicker.requestMediaLibraryPermissionsAsync(),\n        status = _yield$ImagePicker$re.status;\n      if (status !== 'granted') {\n        Alert.alert('Lỗi', 'Cần cấp quyền truy cập thư viện ảnh để gửi ảnh.');\n        return;\n      }\n      try {\n        var result = yield ImagePicker.launchImageLibraryAsync({\n          allowsEditing: false,\n          quality: 0.7\n        });\n        if (!result.canceled && result.assets && result.assets.length > 0) {\n          var asset = result.assets[0];\n          if (asset.type === 'video') {\n            Alert.alert(\"Thông báo\", \"Hiện tại hệ thống chỉ hỗ trợ gửi hình ảnh.\");\n            return;\n          }\n          handleSend(asset.uri, 'IMAGE');\n        }\n      } catch (error) {\n        console.error(\"Lỗi chọn ảnh:\", error);\n        Alert.alert(\"Lỗi\", \"Không thể mở thư viện ảnh: \" + error.message);\n      }\n    });\n    return function pickImage() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var handleSend = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      var content = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : inputText;\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'TEXT';\n      if (!content.trim() && type === 'TEXT') return;\n      if (!conversationId) {\n        try {\n          var conv = yield chatService.getMyConversation();\n          if (conv) setConversationId(conv.id);else {\n            Alert.alert(\"Lỗi\", \"Đang kết nối đến tư vấn viên, vui lòng thử lại sau giây lát.\");\n            return;\n          }\n        } catch (e) {\n          Alert.alert(\"Lỗi\", \"Mất kết nối mạng.\");\n          return;\n        }\n      }\n      setIsSending(true);\n      try {\n        var _yield$chatService$ge;\n        var finalContent = content;\n        if (type === 'IMAGE') {\n          var uploadRes = yield chatService.uploadImage(content);\n          if (!uploadRes || !uploadRes.filename) throw new Error(\"Upload failed\");\n          finalContent = \"chat/\" + uploadRes.filename;\n        }\n        socket == null ? void 0 : socket.emit('sendMessage', {\n          conversationId: conversationId || ((_yield$chatService$ge = yield chatService.getMyConversation()) == null ? void 0 : _yield$chatService$ge.id),\n          content: finalContent,\n          type: type\n        });\n        var tempMsg = {\n          id: Math.random().toString(),\n          conversation_id: conversationId,\n          sender_id: (user == null ? void 0 : user.id) || '',\n          content: finalContent,\n          type: type,\n          created_at: new Date().toISOString(),\n          sender: {\n            id: (user == null ? void 0 : user.id) || '',\n            full_name: (user == null ? void 0 : user.full_name) || 'Tôi'\n          }\n        };\n        setMessages(function (prev) {\n          return [].concat(_toConsumableArray(prev), [tempMsg]);\n        });\n        if (type === 'TEXT') setInputText('');\n        setTimeout(function () {\n          var _flatListRef$current2;\n          return (_flatListRef$current2 = flatListRef.current) == null ? void 0 : _flatListRef$current2.scrollToEnd({\n            animated: true\n          });\n        }, 100);\n      } catch (error) {\n        console.error(\"Gửi tin thất bại:\", error);\n        Alert.alert(\"Lỗi\", \"Không thể gửi tin nhắn. Vui lòng kiểm tra mạng.\");\n      } finally {\n        setIsSending(false);\n      }\n    });\n    return function handleSend() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var renderItem = function renderItem(_ref5) {\n    var item = _ref5.item;\n    var isMe = item.sender_id === (user == null ? void 0 : user.id);\n    var imageUrl = item.content.startsWith('http') ? item.content : BASE_URL + \"/uploads/\" + item.content;\n    return _jsxs(View, {\n      style: [styles.msgRow, isMe ? styles.myMsgRow : styles.otherMsgRow],\n      children: [!isMe && _jsx(Avatar.Icon, {\n        size: 32,\n        icon: \"account\",\n        style: {\n          backgroundColor: '#ccc',\n          marginRight: 8\n        }\n      }), _jsxs(View, {\n        style: [styles.bubble, isMe ? {\n          backgroundColor: theme.colors.primary\n        } : {\n          backgroundColor: '#e0e0e0'\n        }],\n        children: [item.type === 'IMAGE' ? _jsx(Image, {\n          source: {\n            uri: imageUrl\n          },\n          style: {\n            width: 200,\n            height: 150,\n            borderRadius: 8\n          },\n          resizeMode: \"cover\"\n        }) : _jsx(Text, {\n          style: {\n            color: isMe ? 'white' : 'black',\n            fontSize: 16\n          },\n          children: item.content\n        }), _jsx(Text, {\n          style: [styles.timeText, {\n            color: isMe ? 'rgba(255,255,255,0.7)' : '#888'\n          }],\n          children: dayjs(item.created_at).format('HH:mm')\n        })]\n      })]\n    });\n  };\n  if (isLoading) return _jsx(View, {\n    style: styles.center,\n    children: _jsx(ActivityIndicator, {\n      size: \"large\"\n    })\n  });\n  return _jsxs(KeyboardAvoidingView, {\n    behavior: Platform.OS === 'ios' ? 'padding' : undefined,\n    style: {\n      flex: 1,\n      backgroundColor: '#f5f5f5'\n    },\n    keyboardVerticalOffset: 90,\n    children: [_jsx(FlatList, {\n      ref: flatListRef,\n      data: messages,\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      renderItem: renderItem,\n      contentContainerStyle: {\n        padding: 16,\n        paddingBottom: 20\n      },\n      onContentSizeChange: function onContentSizeChange() {\n        var _flatListRef$current3;\n        return (_flatListRef$current3 = flatListRef.current) == null ? void 0 : _flatListRef$current3.scrollToEnd({\n          animated: false\n        });\n      }\n    }), _jsxs(View, {\n      style: styles.inputContainer,\n      children: [_jsx(IconButton, {\n        icon: \"image\",\n        size: 28,\n        iconColor: \"#666\",\n        onPress: pickImage,\n        disabled: isSending\n      }), _jsx(TextInput, {\n        mode: \"outlined\",\n        placeholder: \"Nh\\u1EADp tin nh\\u1EAFn...\",\n        value: inputText,\n        onChangeText: setInputText,\n        style: styles.input,\n        dense: true,\n        theme: {\n          roundness: 20\n        },\n        outlineColor: \"transparent\",\n        activeOutlineColor: \"transparent\"\n      }), _jsx(IconButton, {\n        icon: \"send\",\n        mode: \"contained\",\n        containerColor: theme.colors.primary,\n        iconColor: \"white\",\n        size: 24,\n        onPress: function onPress() {\n          return handleSend(inputText, 'TEXT');\n        },\n        disabled: isSending || !inputText.trim()\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  center: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  msgRow: {\n    flexDirection: 'row',\n    marginBottom: 12,\n    alignItems: 'flex-end'\n  },\n  myMsgRow: {\n    justifyContent: 'flex-end'\n  },\n  otherMsgRow: {\n    justifyContent: 'flex-start'\n  },\n  bubble: {\n    padding: 10,\n    borderRadius: 16,\n    maxWidth: '75%'\n  },\n  timeText: {\n    fontSize: 10,\n    marginTop: 4,\n    alignSelf: 'flex-end'\n  },\n  inputContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 8,\n    backgroundColor: 'white',\n    borderTopWidth: 1,\n    borderColor: '#eee'\n  },\n  input: {\n    flex: 1,\n    backgroundColor: '#f0f0f0',\n    marginHorizontal: 8,\n    borderRadius: 20,\n    height: 40\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","useRef","View","StyleSheet","FlatList","KeyboardAvoidingView","Platform","Image","Alert","TextInput","IconButton","Text","ActivityIndicator","useTheme","Avatar","useSocketStore","useAuthStore","chatService","ImagePicker","dayjs","jsx","_jsx","jsxs","_jsxs","BASE_URL","ChatScreen","_ref","navigation","theme","_useSocketStore","socket","_useAuthStore","user","_useState","_useState2","_slicedToArray","messages","setMessages","_useState3","_useState4","inputText","setInputText","_useState5","_useState6","conversationId","setConversationId","_useState7","_useState8","isLoading","setIsLoading","_useState9","_useState0","isSending","setIsSending","flatListRef","initChat","_ref2","_asyncToGenerator","conv","getMyConversation","id","emit","msgs","getMessages","error","console","apply","arguments","handleNewMessage","msg","sender_id","prev","concat","_toConsumableArray","setTimeout","_flatListRef$current","current","scrollToEnd","animated","on","off","pickImage","_ref3","_yield$ImagePicker$re","requestMediaLibraryPermissionsAsync","status","alert","result","launchImageLibraryAsync","allowsEditing","quality","canceled","assets","length","asset","type","handleSend","uri","message","_ref4","content","undefined","trim","e","_yield$chatService$ge","finalContent","uploadRes","uploadImage","filename","Error","tempMsg","Math","random","toString","conversation_id","created_at","Date","toISOString","sender","full_name","_flatListRef$current2","renderItem","_ref5","item","isMe","imageUrl","startsWith","style","styles","msgRow","myMsgRow","otherMsgRow","children","Icon","size","icon","backgroundColor","marginRight","bubble","colors","primary","source","width","height","borderRadius","resizeMode","color","fontSize","timeText","format","center","behavior","OS","flex","keyboardVerticalOffset","ref","data","keyExtractor","contentContainerStyle","padding","paddingBottom","onContentSizeChange","_flatListRef$current3","inputContainer","iconColor","onPress","disabled","mode","placeholder","value","onChangeText","input","dense","roundness","outlineColor","activeOutlineColor","containerColor","create","justifyContent","alignItems","flexDirection","marginBottom","maxWidth","marginTop","alignSelf","borderTopWidth","borderColor","marginHorizontal"],"sources":["D:/Student/N4_HK2/Web_App/clinic-starter/mobile/src/screens/ChatScreen.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { View, StyleSheet, FlatList, KeyboardAvoidingView, Platform, Image, Alert } from 'react-native';\r\nimport { TextInput, IconButton, Text, ActivityIndicator, useTheme, Avatar } from 'react-native-paper';\r\nimport { useSocketStore } from '../stores/socketStore';\r\nimport { useAuthStore } from '../stores/authStore';\r\nimport { chatService, Message } from '../services/chat.service';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport dayjs from 'dayjs';\r\n\r\n// Thay IP máy của bạn vào đây (Bỏ /api)\r\nconst BASE_URL = 'http://192.168.100.248:3000';\r\n\r\nexport default function ChatScreen({ navigation }: any) {\r\n    const theme = useTheme();\r\n    const { socket } = useSocketStore();\r\n    const { user } = useAuthStore();\r\n\r\n    const [messages, setMessages] = useState<Message[]>([]);\r\n    const [inputText, setInputText] = useState('');\r\n    const [conversationId, setConversationId] = useState<string | null>(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [isSending, setIsSending] = useState(false);\r\n\r\n    const flatListRef = useRef<FlatList>(null);\r\n\r\n    // 1. Khởi tạo: Lấy ID hội thoại & Tin nhắn cũ\r\n    useEffect(() => {\r\n        const initChat = async () => {\r\n            try {\r\n                const conv = await chatService.getMyConversation();\r\n                if (conv) {\r\n                    setConversationId(conv.id);\r\n                    socket?.emit('joinRoom', conv.id);\r\n                    const msgs = await chatService.getMessages(conv.id);\r\n                    setMessages(msgs);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Lỗi init chat:\", error);\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n        };\r\n\r\n        if (socket && user) {\r\n            initChat();\r\n        }\r\n    }, [socket, user]);\r\n\r\n    // 2. Lắng nghe tin nhắn mới từ Socket\r\n    useEffect(() => {\r\n        if (!socket) return;\r\n\r\n        const handleNewMessage = (msg: Message) => {\r\n            // QUAN TRỌNG: Nếu tin nhắn là của chính mình gửi -> Bỏ qua\r\n            // (Vì mình đã add vào list lúc bấm nút Gửi rồi)\r\n            if (msg.sender_id === user?.id) return;\r\n\r\n            setMessages(prev => [...prev, msg]);\r\n            setTimeout(() => flatListRef.current?.scrollToEnd({ animated: true }), 100);\r\n        };\r\n\r\n        socket.on('newMessage', handleNewMessage);\r\n        return () => { socket.off('newMessage', handleNewMessage); };\r\n    }, [socket, user]);\r\n\r\n    // 3. Chọn ảnh (ĐÃ SỬA LỖI CRASH)\r\n    const pickImage = async () => {\r\n        // Xin quyền truy cập thư viện\r\n        const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\r\n        if (status !== 'granted') {\r\n            Alert.alert('Lỗi', 'Cần cấp quyền truy cập thư viện ảnh để gửi ảnh.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // --- SỬA LẠI: KHÔNG TRUYỀN mediaTypes ĐỂ TRÁNH LỖI PHIÊN BẢN ---\r\n            const result = await ImagePicker.launchImageLibraryAsync({\r\n                allowsEditing: false,\r\n                quality: 0.7, // Giảm dung lượng ảnh để gửi nhanh hơn\r\n                // Bỏ dòng mediaTypes để dùng mặc định (tránh lỗi crash trên Expo Go cũ)\r\n            });\r\n\r\n            if (!result.canceled && result.assets && result.assets.length > 0) {\r\n                const asset = result.assets[0];\r\n\r\n                // Kiểm tra nếu người dùng chọn Video (vì mặc định lấy cả 2)\r\n                if (asset.type === 'video') {\r\n                    Alert.alert(\"Thông báo\", \"Hiện tại hệ thống chỉ hỗ trợ gửi hình ảnh.\");\r\n                    return;\r\n                }\r\n\r\n                // Gọi hàm gửi ảnh\r\n                handleSend(asset.uri, 'IMAGE');\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Lỗi chọn ảnh:\", error);\r\n            Alert.alert(\"Lỗi\", \"Không thể mở thư viện ảnh: \" + (error as any).message);\r\n        }\r\n    };\r\n\r\n    // 4. Gửi tin nhắn\r\n    const handleSend = async (content: string = inputText, type: 'TEXT' | 'IMAGE' = 'TEXT') => {\r\n        if (!content.trim() && type === 'TEXT') return;\r\n\r\n        // Nếu chưa có conversationId, thử lấy lại lần nữa (phòng trường hợp mạng lag lúc đầu)\r\n        if (!conversationId) {\r\n            try {\r\n                const conv = await chatService.getMyConversation();\r\n                if (conv) setConversationId(conv.id);\r\n                else {\r\n                    Alert.alert(\"Lỗi\", \"Đang kết nối đến tư vấn viên, vui lòng thử lại sau giây lát.\");\r\n                    return;\r\n                }\r\n            } catch (e) {\r\n                Alert.alert(\"Lỗi\", \"Mất kết nối mạng.\");\r\n                return;\r\n            }\r\n        }\r\n\r\n        setIsSending(true);\r\n        try {\r\n            let finalContent = content;\r\n\r\n            // Xử lý Upload Ảnh trước khi gửi socket\r\n            if (type === 'IMAGE') {\r\n                const uploadRes = await chatService.uploadImage(content);\r\n                if (!uploadRes || !uploadRes.filename) throw new Error(\"Upload failed\");\r\n                finalContent = `chat/${uploadRes.filename}`;\r\n            }\r\n\r\n            // Gửi Socket\r\n            socket?.emit('sendMessage', {\r\n                conversationId: conversationId || (await chatService.getMyConversation())?.id,\r\n                content: finalContent,\r\n                type: type\r\n            });\r\n\r\n            // Optimistic Update (Hiển thị ngay lập tức để cảm giác mượt mà)\r\n            const tempMsg: Message = {\r\n                id: Math.random().toString(), // ID tạm\r\n                conversation_id: conversationId!,\r\n                sender_id: user?.id || '',\r\n                content: finalContent,\r\n                type: type,\r\n                created_at: new Date().toISOString(),\r\n                sender: { id: user?.id || '', full_name: user?.full_name || 'Tôi' }\r\n            };\r\n\r\n            setMessages(prev => [...prev, tempMsg]);\r\n\r\n            if (type === 'TEXT') setInputText('');\r\n\r\n            setTimeout(() => flatListRef.current?.scrollToEnd({ animated: true }), 100);\r\n\r\n        } catch (error) {\r\n            console.error(\"Gửi tin thất bại:\", error);\r\n            Alert.alert(\"Lỗi\", \"Không thể gửi tin nhắn. Vui lòng kiểm tra mạng.\");\r\n        } finally {\r\n            setIsSending(false);\r\n        }\r\n    };\r\n\r\n    // Render từng tin nhắn\r\n    const renderItem = ({ item }: { item: Message }) => {\r\n        const isMe = item.sender_id === user?.id;\r\n\r\n        // Xử lý URL ảnh: Nếu là ảnh upload thì thêm domain, nếu là url ngoài (hiếm) thì giữ nguyên\r\n        const imageUrl = item.content.startsWith('http')\r\n            ? item.content\r\n            : `${BASE_URL}/uploads/${item.content}`;\r\n\r\n        return (\r\n            <View style={[styles.msgRow, isMe ? styles.myMsgRow : styles.otherMsgRow]}>\r\n                {!isMe && (\r\n                    <Avatar.Icon size={32} icon=\"account\" style={{ backgroundColor: '#ccc', marginRight: 8 }} />\r\n                )}\r\n                <View style={[\r\n                    styles.bubble,\r\n                    isMe ? { backgroundColor: theme.colors.primary } : { backgroundColor: '#e0e0e0' }\r\n                ]}>\r\n                    {item.type === 'IMAGE' ? (\r\n                        <Image\r\n                            source={{ uri: imageUrl }}\r\n                            style={{ width: 200, height: 150, borderRadius: 8 }}\r\n                            resizeMode=\"cover\"\r\n                        />\r\n                    ) : (\r\n                        <Text style={{ color: isMe ? 'white' : 'black', fontSize: 16 }}>{item.content}</Text>\r\n                    )}\r\n                    <Text style={[styles.timeText, { color: isMe ? 'rgba(255,255,255,0.7)' : '#888' }]}>\r\n                        {dayjs(item.created_at).format('HH:mm')}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n        );\r\n    };\r\n\r\n    if (isLoading) return <View style={styles.center}><ActivityIndicator size=\"large\" /></View>;\r\n\r\n    return (\r\n        <KeyboardAvoidingView\r\n            behavior={Platform.OS === 'ios' ? 'padding' : undefined}\r\n            style={{ flex: 1, backgroundColor: '#f5f5f5' }}\r\n            keyboardVerticalOffset={90}\r\n        >\r\n            <FlatList\r\n                ref={flatListRef}\r\n                data={messages}\r\n                keyExtractor={(item) => item.id}\r\n                renderItem={renderItem}\r\n                contentContainerStyle={{ padding: 16, paddingBottom: 20 }}\r\n                onContentSizeChange={() => flatListRef.current?.scrollToEnd({ animated: false })}\r\n            />\r\n\r\n            <View style={styles.inputContainer}>\r\n                <IconButton\r\n                    icon=\"image\"\r\n                    size={28}\r\n                    iconColor=\"#666\"\r\n                    onPress={pickImage}\r\n                    disabled={isSending}\r\n                />\r\n                <TextInput\r\n                    mode=\"outlined\"\r\n                    placeholder=\"Nhập tin nhắn...\"\r\n                    value={inputText}\r\n                    onChangeText={setInputText}\r\n                    style={styles.input}\r\n                    dense\r\n                    theme={{ roundness: 20 }}\r\n                    outlineColor=\"transparent\"\r\n                    activeOutlineColor=\"transparent\"\r\n                />\r\n                <IconButton\r\n                    icon=\"send\"\r\n                    mode=\"contained\"\r\n                    containerColor={theme.colors.primary}\r\n                    iconColor=\"white\"\r\n                    size={24}\r\n                    onPress={() => handleSend(inputText, 'TEXT')}\r\n                    disabled={isSending || !inputText.trim()}\r\n                />\r\n            </View>\r\n        </KeyboardAvoidingView>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    center: { flex: 1, justifyContent: 'center', alignItems: 'center' },\r\n    msgRow: { flexDirection: 'row', marginBottom: 12, alignItems: 'flex-end' },\r\n    myMsgRow: { justifyContent: 'flex-end' },\r\n    otherMsgRow: { justifyContent: 'flex-start' },\r\n    bubble: { padding: 10, borderRadius: 16, maxWidth: '75%' },\r\n    timeText: { fontSize: 10, marginTop: 4, alignSelf: 'flex-end' },\r\n    inputContainer: {\r\n        flexDirection: 'row', alignItems: 'center', padding: 8,\r\n        backgroundColor: 'white', borderTopWidth: 1, borderColor: '#eee'\r\n    },\r\n    input: { flex: 1, backgroundColor: '#f0f0f0', marginHorizontal: 8, borderRadius: 20, height: 40 }\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}