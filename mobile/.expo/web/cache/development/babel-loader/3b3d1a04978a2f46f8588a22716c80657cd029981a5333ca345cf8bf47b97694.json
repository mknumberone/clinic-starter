{"ast":null,"code":"import React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Card from \"react-native-paper/lib/module/components/Card/Card\";\nimport Text from \"react-native-paper/lib/module/components/Typography/Text\";\nimport * as Avatar from \"react-native-paper/lib/module/components/Avatar/Avatar\";\nimport ActivityIndicator from \"react-native-paper/lib/module/components/ActivityIndicator\";\nimport { useTheme } from \"react-native-paper/lib/module/core/theming\";\nimport { useQuery } from '@tanstack/react-query';\nimport { useNavigation } from '@react-navigation/native';\nimport { appointmentService } from \"../services/appointment.service\";\nimport dayjs from 'dayjs';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function MedicalRecordsScreen() {\n  var _data$data;\n  var theme = useTheme();\n  var navigation = useNavigation();\n  var _useQuery = useQuery({\n      queryKey: ['medicalRecords'],\n      queryFn: appointmentService.getMyAppointments\n    }),\n    data = _useQuery.data,\n    isLoading = _useQuery.isLoading,\n    refetch = _useQuery.refetch;\n  var completedRecords = (data == null ? void 0 : (_data$data = data.data) == null ? void 0 : _data$data.filter(function (apt) {\n    return apt.status === 'COMPLETED';\n  })) || [];\n  if (isLoading) return _jsx(View, {\n    style: styles.center,\n    children: _jsx(ActivityIndicator, {\n      size: \"large\"\n    })\n  });\n  return _jsx(ScrollView, {\n    style: styles.container,\n    refreshControl: _jsx(RefreshControl, {\n      refreshing: isLoading,\n      onRefresh: refetch\n    }),\n    children: completedRecords.length === 0 ? _jsx(View, {\n      style: styles.emptyContainer,\n      children: _jsx(Text, {\n        style: {\n          opacity: 0.5\n        },\n        children: \"Ch\\u01B0a c\\xF3 h\\u1ED3 s\\u01A1 b\\u1EC7nh \\xE1n n\\xE0o.\"\n      })\n    }) : _jsx(View, {\n      style: styles.list,\n      children: completedRecords.map(function (record) {\n        var _record$doctor, _record$doctor$user, _record$branch;\n        return _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return navigation.navigate('MedicalRecordDetail', {\n              id: record.id\n            });\n          },\n          children: _jsx(Card, {\n            style: styles.card,\n            children: _jsxs(Card.Content, {\n              style: styles.cardContent,\n              children: [_jsxs(View, {\n                style: styles.dateBox,\n                children: [_jsx(Text, {\n                  variant: \"headlineMedium\",\n                  style: {\n                    fontWeight: 'bold',\n                    color: theme.colors.primary\n                  },\n                  children: dayjs(record.start_time).format('DD')\n                }), _jsx(Text, {\n                  variant: \"bodySmall\",\n                  children: dayjs(record.start_time).format('MM/YYYY')\n                })]\n              }), _jsxs(View, {\n                style: styles.infoBox,\n                children: [_jsxs(Text, {\n                  variant: \"titleMedium\",\n                  style: {\n                    fontWeight: 'bold'\n                  },\n                  children: [\"Kh\\xE1m: \", record.appointment_type || 'Tổng quát']\n                }), _jsxs(Text, {\n                  variant: \"bodyMedium\",\n                  style: {\n                    color: '#666'\n                  },\n                  children: [\"BS. \", (_record$doctor = record.doctor) == null ? void 0 : (_record$doctor$user = _record$doctor.user) == null ? void 0 : _record$doctor$user.full_name]\n                }), _jsx(Text, {\n                  variant: \"bodySmall\",\n                  style: {\n                    color: '#888',\n                    marginTop: 4\n                  },\n                  numberOfLines: 1,\n                  children: (_record$branch = record.branch) == null ? void 0 : _record$branch.name\n                })]\n              }), _jsx(Avatar.Icon, {\n                size: 32,\n                icon: \"chevron-right\",\n                style: {\n                  backgroundColor: 'transparent'\n                },\n                color: \"#ccc\"\n              })]\n            })\n          })\n        }, record.id);\n      })\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5'\n  },\n  center: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  list: {\n    padding: 16\n  },\n  card: {\n    marginBottom: 12,\n    backgroundColor: 'white'\n  },\n  cardContent: {\n    flexDirection: 'row',\n    alignItems: 'center'\n  },\n  dateBox: {\n    alignItems: 'center',\n    paddingRight: 16,\n    borderRightWidth: 1,\n    borderRightColor: '#eee'\n  },\n  infoBox: {\n    flex: 1,\n    paddingLeft: 16\n  },\n  emptyContainer: {\n    padding: 40,\n    alignItems: 'center'\n  }\n});","map":{"version":3,"names":["React","View","StyleSheet","ScrollView","RefreshControl","TouchableOpacity","Card","Text","Avatar","ActivityIndicator","useTheme","useQuery","useNavigation","appointmentService","dayjs","jsx","_jsx","jsxs","_jsxs","MedicalRecordsScreen","_data$data","theme","navigation","_useQuery","queryKey","queryFn","getMyAppointments","data","isLoading","refetch","completedRecords","filter","apt","status","style","styles","center","children","size","container","refreshControl","refreshing","onRefresh","length","emptyContainer","opacity","list","map","record","_record$doctor","_record$doctor$user","_record$branch","onPress","navigate","id","card","Content","cardContent","dateBox","variant","fontWeight","color","colors","primary","start_time","format","infoBox","appointment_type","doctor","user","full_name","marginTop","numberOfLines","branch","name","Icon","icon","backgroundColor","create","flex","justifyContent","alignItems","padding","marginBottom","flexDirection","paddingRight","borderRightWidth","borderRightColor","paddingLeft"],"sources":["D:/Student/N4_HK2/Web_App/clinic-starter/mobile/src/screens/MedicalRecordsScreen.tsx"],"sourcesContent":["import React from 'react';\r\nimport { View, StyleSheet, ScrollView, RefreshControl, TouchableOpacity } from 'react-native';\r\nimport { Card, Text, Avatar, Chip, ActivityIndicator, useTheme } from 'react-native-paper';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { appointmentService } from '../services/appointment.service';\r\nimport dayjs from 'dayjs';\r\n\r\nexport default function MedicalRecordsScreen() {\r\n    const theme = useTheme();\r\n    const navigation = useNavigation<any>();\r\n\r\n    const { data, isLoading, refetch } = useQuery({\r\n        queryKey: ['medicalRecords'],\r\n        queryFn: appointmentService.getMyAppointments,\r\n    });\r\n\r\n    // Chỉ lấy các lịch đã hoàn thành (có kết quả khám)\r\n    const completedRecords = data?.data?.filter((apt: any) => apt.status === 'COMPLETED') || [];\r\n\r\n    if (isLoading) return <View style={styles.center}><ActivityIndicator size=\"large\" /></View>;\r\n\r\n    return (\r\n        <ScrollView\r\n            style={styles.container}\r\n            refreshControl={<RefreshControl refreshing={isLoading} onRefresh={refetch} />}\r\n        >\r\n            {completedRecords.length === 0 ? (\r\n                <View style={styles.emptyContainer}>\r\n                    <Text style={{ opacity: 0.5 }}>Chưa có hồ sơ bệnh án nào.</Text>\r\n                </View>\r\n            ) : (\r\n                <View style={styles.list}>\r\n                    {completedRecords.map((record: any) => (\r\n                        <TouchableOpacity\r\n                            key={record.id}\r\n                            onPress={() => navigation.navigate('MedicalRecordDetail', { id: record.id })}\r\n                        >\r\n                            <Card style={styles.card}>\r\n                                <Card.Content style={styles.cardContent}>\r\n                                    <View style={styles.dateBox}>\r\n                                        <Text variant=\"headlineMedium\" style={{ fontWeight: 'bold', color: theme.colors.primary }}>\r\n                                            {dayjs(record.start_time).format('DD')}\r\n                                        </Text>\r\n                                        <Text variant=\"bodySmall\">{dayjs(record.start_time).format('MM/YYYY')}</Text>\r\n                                    </View>\r\n\r\n                                    <View style={styles.infoBox}>\r\n                                        <Text variant=\"titleMedium\" style={{ fontWeight: 'bold' }}>Khám: {record.appointment_type || 'Tổng quát'}</Text>\r\n                                        <Text variant=\"bodyMedium\" style={{ color: '#666' }}>BS. {record.doctor?.user?.full_name}</Text>\r\n                                        <Text variant=\"bodySmall\" style={{ color: '#888', marginTop: 4 }} numberOfLines={1}>\r\n                                            {record.branch?.name}\r\n                                        </Text>\r\n                                    </View>\r\n\r\n                                    <Avatar.Icon size={32} icon=\"chevron-right\" style={{ backgroundColor: 'transparent' }} color=\"#ccc\" />\r\n                                </Card.Content>\r\n                            </Card>\r\n                        </TouchableOpacity>\r\n                    ))}\r\n                </View>\r\n            )}\r\n        </ScrollView>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: { flex: 1, backgroundColor: '#f5f5f5' },\r\n    center: { flex: 1, justifyContent: 'center', alignItems: 'center' },\r\n    list: { padding: 16 },\r\n    card: { marginBottom: 12, backgroundColor: 'white' },\r\n    cardContent: { flexDirection: 'row', alignItems: 'center' },\r\n    dateBox: { alignItems: 'center', paddingRight: 16, borderRightWidth: 1, borderRightColor: '#eee' },\r\n    infoBox: { flex: 1, paddingLeft: 16 },\r\n    emptyContainer: { padding: 40, alignItems: 'center' }\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}