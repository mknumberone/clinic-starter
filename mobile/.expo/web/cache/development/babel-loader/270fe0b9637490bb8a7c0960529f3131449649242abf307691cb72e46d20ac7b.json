{"ast":null,"code":"import React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Card from \"react-native-paper/lib/module/components/Card/Card\";\nimport Text from \"react-native-paper/lib/module/components/Typography/Text\";\nimport Chip from \"react-native-paper/lib/module/components/Chip/Chip\";\nimport ActivityIndicator from \"react-native-paper/lib/module/components/ActivityIndicator\";\nimport { useTheme } from \"react-native-paper/lib/module/core/theming\";\nimport { useQuery } from '@tanstack/react-query';\nimport { useNavigation } from '@react-navigation/native';\nimport { prescriptionService } from \"../services/prescription.service\";\nimport { useAuthStore } from \"../stores/authStore\";\nimport dayjs from 'dayjs';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function InvoicesScreen() {\n  var theme = useTheme();\n  var navigation = useNavigation();\n  var user = useAuthStore(function (state) {\n    return state.user;\n  });\n  var _useQuery = useQuery({\n      queryKey: ['myInvoices', (user == null ? void 0 : user.patient_id) || ''],\n      queryFn: function queryFn() {\n        return prescriptionService.getMyInvoices((user == null ? void 0 : user.patient_id) || '');\n      },\n      enabled: !!(user != null && user.patient_id)\n    }),\n    data = _useQuery.data,\n    isLoading = _useQuery.isLoading,\n    refetch = _useQuery.refetch;\n  var getStatusColor = function getStatusColor(status) {\n    return status === 'PAID' ? '#4caf50' : status === 'UNPAID' ? '#f44336' : '#ff9800';\n  };\n  var getStatusText = function getStatusText(status) {\n    return status === 'PAID' ? 'Đã thanh toán' : status === 'UNPAID' ? 'Chưa thanh toán' : 'Một phần';\n  };\n  if (isLoading) return _jsx(View, {\n    style: styles.center,\n    children: _jsx(ActivityIndicator, {})\n  });\n  return _jsx(ScrollView, {\n    style: styles.container,\n    refreshControl: _jsx(RefreshControl, {\n      refreshing: isLoading,\n      onRefresh: refetch\n    }),\n    children: _jsx(View, {\n      style: styles.list,\n      children: data == null ? void 0 : data.map(function (invoice) {\n        return _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return navigation.navigate('InvoiceDetail', {\n              id: invoice.id\n            });\n          },\n          children: _jsx(Card, {\n            style: styles.card,\n            children: _jsxs(Card.Content, {\n              children: [_jsxs(View, {\n                style: styles.header,\n                children: [_jsxs(Text, {\n                  variant: \"titleMedium\",\n                  style: {\n                    fontWeight: 'bold'\n                  },\n                  children: [\"H\\xF3a \\u0111\\u01A1n #\", invoice.id.slice(0, 8).toUpperCase()]\n                }), _jsx(Chip, {\n                  textStyle: {\n                    color: 'white',\n                    fontSize: 12\n                  },\n                  style: {\n                    backgroundColor: getStatusColor(invoice.status),\n                    height: 28\n                  },\n                  children: getStatusText(invoice.status)\n                })]\n              }), _jsxs(View, {\n                style: {\n                  marginTop: 8\n                },\n                children: [_jsxs(Text, {\n                  children: [\"Ng\\xE0y: \", dayjs(invoice.created_at).format('DD/MM/YYYY HH:mm')]\n                }), _jsxs(Text, {\n                  variant: \"titleLarge\",\n                  style: {\n                    color: theme.colors.error,\n                    fontWeight: 'bold',\n                    marginTop: 4\n                  },\n                  children: [Number(invoice.total_amount).toLocaleString(), \" \\u20AB\"]\n                })]\n              })]\n            })\n          })\n        }, invoice.id);\n      })\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5'\n  },\n  center: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  list: {\n    padding: 16\n  },\n  card: {\n    marginBottom: 12\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  }\n});","map":{"version":3,"names":["React","View","StyleSheet","ScrollView","RefreshControl","TouchableOpacity","Card","Text","Chip","ActivityIndicator","useTheme","useQuery","useNavigation","prescriptionService","useAuthStore","dayjs","jsx","_jsx","jsxs","_jsxs","InvoicesScreen","theme","navigation","user","state","_useQuery","queryKey","patient_id","queryFn","getMyInvoices","enabled","data","isLoading","refetch","getStatusColor","status","getStatusText","style","styles","center","children","container","refreshControl","refreshing","onRefresh","list","map","invoice","onPress","navigate","id","card","Content","header","variant","fontWeight","slice","toUpperCase","textStyle","color","fontSize","backgroundColor","height","marginTop","created_at","format","colors","error","Number","total_amount","toLocaleString","create","flex","justifyContent","alignItems","padding","marginBottom","flexDirection"],"sources":["D:/Student/N4_HK2/Web_App/clinic-starter/mobile/src/screens/InvoicesScreen.tsx"],"sourcesContent":["import React from 'react';\r\nimport { View, StyleSheet, ScrollView, RefreshControl, TouchableOpacity } from 'react-native';\r\nimport { Card, Text, Chip, ActivityIndicator, useTheme } from 'react-native-paper';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { prescriptionService } from '../services/prescription.service';\r\nimport { useAuthStore } from '../stores/authStore';\r\nimport dayjs from 'dayjs';\r\n\r\nexport default function InvoicesScreen() {\r\n    const theme = useTheme();\r\n    const navigation = useNavigation<any>();\r\n    const user = useAuthStore((state) => state.user);\r\n\r\n    const { data, isLoading, refetch } = useQuery({\r\n        queryKey: ['myInvoices', user?.patient_id || ''],\r\n        queryFn: () => prescriptionService.getMyInvoices(user?.patient_id || ''),\r\n        enabled: !!user?.patient_id,\r\n    });\r\n\r\n    const getStatusColor = (status: string) => {\r\n        return status === 'PAID' ? '#4caf50' : status === 'UNPAID' ? '#f44336' : '#ff9800';\r\n    };\r\n\r\n    const getStatusText = (status: string) => {\r\n        return status === 'PAID' ? 'Đã thanh toán' : status === 'UNPAID' ? 'Chưa thanh toán' : 'Một phần';\r\n    };\r\n\r\n    if (isLoading) return <View style={styles.center}><ActivityIndicator /></View>;\r\n\r\n    return (\r\n        <ScrollView\r\n            style={styles.container}\r\n            refreshControl={<RefreshControl refreshing={isLoading} onRefresh={refetch} />}\r\n        >\r\n            <View style={styles.list}>\r\n                {data?.map((invoice: any) => (\r\n                    <TouchableOpacity\r\n                        key={invoice.id}\r\n                        onPress={() => navigation.navigate('InvoiceDetail', { id: invoice.id })}\r\n                    >\r\n                        <Card style={styles.card}>\r\n                            <Card.Content>\r\n                                <View style={styles.header}>\r\n                                    <Text variant=\"titleMedium\" style={{ fontWeight: 'bold' }}>\r\n                                        Hóa đơn #{invoice.id.slice(0, 8).toUpperCase()}\r\n                                    </Text>\r\n                                    <Chip\r\n                                        textStyle={{ color: 'white', fontSize: 12 }}\r\n                                        style={{ backgroundColor: getStatusColor(invoice.status), height: 28 }}\r\n                                    >\r\n                                        {getStatusText(invoice.status)}\r\n                                    </Chip>\r\n                                </View>\r\n                                <View style={{ marginTop: 8 }}>\r\n                                    <Text>Ngày: {dayjs(invoice.created_at).format('DD/MM/YYYY HH:mm')}</Text>\r\n                                    <Text variant=\"titleLarge\" style={{ color: theme.colors.error, fontWeight: 'bold', marginTop: 4 }}>\r\n                                        {Number(invoice.total_amount).toLocaleString()} ₫\r\n                                    </Text>\r\n                                </View>\r\n                            </Card.Content>\r\n                        </Card>\r\n                    </TouchableOpacity>\r\n                ))}\r\n            </View>\r\n        </ScrollView>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: { flex: 1, backgroundColor: '#f5f5f5' },\r\n    center: { flex: 1, justifyContent: 'center', alignItems: 'center' },\r\n    list: { padding: 16 },\r\n    card: { marginBottom: 12 },\r\n    header: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' },\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}